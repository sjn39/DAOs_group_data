{
    "poll_list": [
        {
            "title": "Liquidations 1.2 Upgrade - August 10, 2020",
            "index": "3592",
            "option": "Yes",
            "supporting_mkr": "29,387",
            "highest_fraction": 1.0
        }
    ],
    "discourse_list": [
        {
            "thread_link": "https://forum.makerdao.com/t/liquidations-system-1-2-upgrade-timeline/3592",
            "title": "Liquidations System 1.2 Upgrade (Timeline) ",
            "index": 3592,
            "category": [
                "Governance"
            ],
            "tags": [
                "alignment",
                "liquidation-system",
                "weekly-cycle"
            ],
            "content": [
                {
                    "author_link": "https://forum.makerdao.com/u/charlesstlouis",
                    "index": "#1",
                    "likes": "13",
                    "time": "08/08/2020-04:28:46",
                    "content": " Liquidations System 1.2 Upgrade The main goal of this forum post is to introduce and explain the need for a Liquidation System 1.2 upgrade and provide a timeline for the implementation.  Introduction The Liquidations 2.0 redesign will allow the system stakeholders to access the entire Dai market, which should have the dual benefit of helping to reduce Dai price shocks. However, given the Liquidations 2.0 upgrade timeline, we believe that there should be a minor upgrade to the current liquidations system to further secure it until the release of the full 2.0 Liquidations system. The highlighted points below explain why a Liquidations system 1.2 upgrade is the best interim step prior to the full release.  Liquidations 1.2 Upgrade Considerations Based on our ongoing analysis of the market, the Maker Foundation teams have determined several opportunities to improve the Maker Protocol\u2019s collateral auction mechanism. For example, we saw earlier this year; the Maker Foundation is working on a Liquidations 2.0 redesign that is currently in-progress and is aimed to be delivered in Q4 of this year. Additionally, last month we saw the Liquidations system 1.1 upgrade become officially ratified through the MIPs process. This upgrade contained improvements to the Maker Protocol\u2019s auction contracts to avoid the need for extra funds when a bidder modifies a bid they have already made (\u201cdouble liquidity\u201d issue) as well as to fix the \u201cstuck debt auctions\u201d bug.  With the present market paired with the current operating liquidation system, it has become increasingly inefficient to run Keepers and participate in the Protocol\u2019s auctions. Additionally, with the current level of DAI debt in the system and the ~$1.3 billion value of collateral locked up, the liquidity provided by the Keepers is becoming increasingly insignificant. Therefore, if the market were to crash unexpectedly, Keepers may not be able to access the capital necessary to handle a rapidly increasing quantity of liquidations. The Liquidation Upgrade 1.2 contains one of the longer-term planned Liquidation 2.0 upgrade design components, which has been thoroughly examined and discussed in the community. Given the current market conditions and the related risk, we believe we need this functionality added to the Protocol sooner. Additionally, this upgrade also adds a practical oracle security method. This method would be used to prevent an oracle attack affecting liquidations. For example, if there were an oracle attack on the system that resulted in the collateral spot price reaching a low level and Maker Governance failed to act or respond in the time required, this could leave all collateral assets in the Protocol vulnerable to liquidation. This upgrade seeks to decrease risks associated with Keeper liquidity by instilling governance parameters that set the maximum DAI amount that may be in line for auction at any given time.    Why upgrade the Maker Protocol\u2019s Liquidations System instead of using the Circuit Breaker? Maker Governance recently introduced a mechanism to perform Collateral Liquidation Freezes. The addition was called the circuit breaker, which serves as an issue-response tool. The Circuit breaker works by creating a mechanism for Governance to temporarily disable Vaults from being sent to the auction liquidation module and operates outside of the Governance Security Module (GSM) and is therefore not subject to any delay. In order to re-enable liquidations, MKR Holders would have to pass a subsequent executive vote. In summary, the circuit breaker\u2019s primary purpose is to be used in situations where a sudden Eth-price drop occurs and possibly triggering a series of auctions. Without the circuit breaker as an option, the Maker Protocol remains more vulnerable to certain price movements. This is not an issue of how much collateral the exchanges can absorb, but how much Dai liquidity keepers can generate and utilize. The circuit breaker helps by processing liquidations in a more orderly manner. Despite the circuit breaker being a useful issue-response tool, there are a few drawbacks to using it if the crypto market experiences a rapid, massive, and widespread price decline. The following are several notable risks, though this list is not exhaustive and there may be more risks that we have not identified (individuals are encouraged to do their own research):  The Circuit Breaker requires impeccable timing.  For instance, using the circuit breaker requires getting the right execution time and relying on the Maker governance community (MKR holders) to respond quickly.  Triggering the circuit breaker requires X amount of MKR to execute - which may not get fulfilled in time. If the timing is not right, there is a substantial risk that Keepers are unable to handle an overwhelming number of liquidations.   As another point, having a 1 hour time period to rally enough MKR to activate the breaker is challenging to coordinate unless everyone is already paying attention. To re-enable liquidations, another executive action would be required.   Using the circuit breaker requires subsequent action after it has been executed. More specifically, once the oracle price has been frozen, it cannot be un-frozen without re-deploying the Oracle Security Module (OSM) and updating the Maker Protocol smart contracts to point at the new deployment. Relying on the circuit breaker, at this moment, seems best reserved for future exogenous events.  Given the above-listed points and the potential for further unseen risks, we believe a better solution is to intermittently upgrade the liquidations system to address potential issues and improve the system\u2019s efficiency and usability before the Liquidations 2.0 system is finalized for implementation.  Liquidations 1.2 Upgrade Details Overview: With the amount of Dai outstanding in the Maker Protocol, if there were a price crash, there would not be enough liquidity available to manage a large amount of auctions properly. In this case, the circuit breaker is not the right solution as it is subject to the system delay in addition to other complications. The Liquidations 1.2 Upgrade will allow Maker Governance to control the total amount of Dai that can be in auction at any one time.  Technical Details:  From a technical point of view, the plan is to deploy new flipper contracts and the cat contract. Additionally, there will be a new risk parameter defining the maximum Dai amount collected through the auctions at any time. The governance parameter box will be used to determine the maximum DAI amount that can be out for auction at any given time. As more auctions occur, an accumulator variable named the litter will be incremented. Each time a bite is called on a given Vault, a check to ensure litter < box will occur. Whenever an auction is concluded, the DAI amount of that auction is decremented from the litter.  Update the DEFCON spell with the new contract addresses. Deploy DEFCON spell and add to the dschief (executive voting contract) slate.   Next Steps (Timeline for the Liquidations 1.2 Upgrade) This upgrade will follow the newly ratified Weekly Governance Cycle (MIP16) 's schedule:   Monday, August 10: Governance Poll goes live  Thursday, August 13: Governance & Risk call to discuss the results  Date TBD: Executive Vote is published   Overview of Maker Governance Cycle\u2019s  85932289-b0dc7880-b898-11ea-8a11-b1379dde04fb826\u00d7333 22.9 KB   /fin ",
                    "links": [
                        "https://docs.makerdao.com/smart-contract-modules/oracle-module/oracle-security-module-osm-detailed-documentation",
                        "https://docs.makerdao.com/smart-contract-modules/collateral-module/flipper-detailed-documentation",
                        "https://docs.makerdao.com/smart-contract-modules/core-module/cat-detailed-documentation",
                        "https://docs.makerdao.com/smart-contract-modules/governance-module/chief-detailed-documentation",
                        "https://github.com/makerdao/mips/blob/RFC/MIP16/mip16.md",
                        "https://forum.makerdao.com/t/a-liquidation-system-redesign-a-pre-mip-discussion/2790/52",
                        "https://forum.makerdao.com/t/weekly-polls-2020-08-10/3627",
                        "https://forum.makerdao.com/t/maker-relay-ep-7/3630",
                        "https://forum.makerdao.com/t/agenda-discussion-scientific-governance-and-risk-106-thursday-august-20-4-00-pm-utc/3657",
                        "https://forum.makerdao.com/t/weekly-mips-update-13/3906",
                        "https://forum.makerdao.com/t/weekly-mips-update-14/4028",
                        "https://forum.makerdao.com/t/liquidations-1-2-technical-details/3792",
                        "https://forum.makerdao.com/t/vault-liquidation-mechanism-for-centrifuge-trade-finance-assets-a-pre-mip-discussion/3737",
                        "https://forum.makerdao.com/t/agenda-discussion-scientific-governance-and-risk-105-thursday-august-13-4-00-pm-utc/3570/5",
                        "https://forum.makerdao.com/t/maker-relay-ep-09/3793",
                        "https://forum.makerdao.com/t/agenda-discussion-scientific-governance-and-risk-106-thursday-august-20-4-00-pm-utc/3657/3"
                    ],
                    "GPT-summary": "The post introduces and explains the need for a Liquidation System 1.2 upgrade and provides a timeline for the implementation. The upgrade is an interim step prior to the full release of Liquidations 2.0, which aims to improve the Maker Protocol's collateral auction mechanism. The post discusses the drawbacks of using the Circuit Breaker and proposes the Liquidations 1.2 Upgrade as a better solution. The post also provides technical details of the upgrade and outlines the timeline for its implementation. The post invites feedback and questions from the community.",
                    "GPT-proposal-categories": [
                        "Smart contract updates",
                        "Token economics",
                        "Privacy, Security and risk management",
                        "Interoperability and Scalability",
                        "None"
                    ],
                    "GPT-discussion-categories": [
                        "Author of proposal is explaining proposal",
                        "None"
                    ],
                    "Sentiment": 5.697199830820521
                },
                {
                    "author_link": "https://forum.makerdao.com/u/Jiecut",
                    "index": "#2",
                    "likes": "0",
                    "time": "08/08/2020-05:11:31",
                    "content": "Nice! A throttle upgrade for 1.2 to add security before Liquidation System 2.0. Big improvement over the current circuit breaker. So no idea how big the box would be, one thing is that amount of DAI being auctioned in the same 6h period, isn\u2019t the biggest problem, but having a lot of DAI in auctions ending close together. So with the current system it might take 6 hours to empty the litter box, that might\u2019ve gotten filled in 10 minutes. It might help to have boxes that are 1-2 hours big (or shorter than an hour), instead of putting all 6 hours into 1 box. Basically what I\u2019m saying is that some more finer tuned throttle control might be even better. Multiple smaller boxes  In the extreme case, less DAI auctions bunched together and ending at the same time Governance will be able to set a bigger combined box. More DAI being auctioned every 6 hours.  So the technical difference, have the litter box empty itself over time, and not from auctions ending. Anyways, a circuit breaker sounds great. Not sure if you can make any technical changes before the Aug 14 executive. Or if the added complexity is needed instead of focusing on Liquidations System 2.0. ",
                    "links": [],
                    "GPT-discussion-categories": [
                        "3rd party giving constructive criticism of proposal",
                        "3rd party asking questions about proposal"
                    ],
                    "Sentiment": 5.668402777777778
                },
                {
                    "author_link": "https://forum.makerdao.com/u/wouter",
                    "index": "#3",
                    "likes": "4",
                    "time": "08/08/2020-09:39:37",
                    "content": "    Jiecut:  Or if the added complexity is needed instead of focusing on Liquidations System 2.0.   This is the main point I think. Doing the simplest possible change now that doesn\u2019t distract us from the 2.0 work. ",
                    "links": [],
                    "GPT-discussion-categories": [
                        "3rd party giving constructive criticism of proposal",
                        "3rd party asking questions about proposal"
                    ],
                    "Sentiment": 5.416666666666666
                },
                {
                    "author_link": "https://forum.makerdao.com/u/cyrus",
                    "index": "#5",
                    "likes": "10",
                    "time": "09/08/2020-16:21:40",
                    "content": "I\u2019m personally strongly in support of this idea. Auction inefficiencies with respect to lack of circulating or available Dai is a huge issue. With the size of the collateral portfolio growing as large as it has been lately, Maker is even more at risk in case there is a sudden drop. The original circuit breaker / liquidation freeze, which is still a very viable and useful tool, was created somewhat hastily and is basically a blunt version of Liquidations 1.2. With 1.2, governance can be more granular about how they want to structure liquidations. I\u2019d love to see this added as soon as possible. ",
                    "links": [],
                    "GPT-discussion-categories": [
                        "3rd party giving constructive criticism of proposal",
                        "3rd party extending to proposal",
                        "3rd party asking questions about proposal",
                        "None of the topics listed match"
                    ],
                    "Sentiment": 6.35485347985348
                },
                {
                    "author_link": "https://forum.makerdao.com/u/MakerMan",
                    "index": "#6",
                    "likes": "1",
                    "time": "09/08/2020-17:13:48",
                    "content": "I think if we look at what we have now.  Only circuit breaker (which stops everything and has to be timed impeccably).  Taking an alternative approach to liquidations by throttling them based on the litter box is probably a good step. I am guessing we are going to have a fixed DAI sized litter box vs. one that kind of tracks a % of outstanding. One thing I want to point out.   We need a notification system when litter box is full - in the operational system status display.   We also are going to need to have another parameter that tells us how much more collateral is slated to be auctioned.   If we have the litter box full and like 5-10 more litter boxes of collateral coming up - governance will need to step in or we then face building system loss risk because we can\u2019t clear collateral out effectively. My concern is that this is another system parameter that will need to be tuned and I have no idea what scientific data we are going to use to tune it, much less come up with an initial estimate of how large the litter box needs to be and how often it will be emptied. I agree with Jiecut that 6hrs may be too long here. Something else but I don\u2019t think this can be done easily is the idea if we have like 10 litter boxes of collateral to auction it would be nice to actually take 1/10th of all the collateral up for auction over all vaults with CRs below the LR and auction it.  If any collateral is returned it could put a good fraction of vaults CRs above the LR removing any need to auction more collateral for that vault.  I made a post illustrating this sequential vault liquidation as a mechanism to reduce the amount of collateral needing to be liquidated.  IF any collateral is returned to a vault based on a partial liquidation this could raise the CR of the vault eliminating any subsequent liquidations.   Honestly I think this change is much more significant and probably not a practical change but I just point it out for thought while people are working on Liquidation2.0 code.   The point here is if you have 10 litter boxes of collateral and then take pieces of vaults collateral and auction them in the first litter box together one might just get enough collateral back to make it so some large fraction of all the vaults that needed to be liquidated in the previous litter box now have a CR above the LR and don\u2019t need to liquidate any more saving keepers, system and a key point vault owners.  Actually applying this sequential auctioning across entire spectrum of vaults that come up it might be that only auctioning 1/5 or 1/10 of all the vaults up for liquidation collateral and returning 1-2-3% of collateral might be sufficient not to save 1:10 but it might take 5:10 or more vaults out of the liquidation CR zone.   This will be particularly true once the collateral price bottom hits and prices start to increase and we find we only need to auction only 10-20% of a vaults collateral to bring their CRs up enough so the rest of the vault collateral doesn\u2019t need to be liquidated. The more I think about this from the litter box perspective the more appealing this \u2018sequential vault liquidation\u2019 method seems to be in terms of staving off more collateral into liquidation than is required depending on market conditions.   I hope this will be seriously considered when thinking about liquidation system 2.0 as it helps not just keepers, the system, but also vault owners tremendously.     A Liquidation System Redesign: A Pre-MIP Discussion Proposal Ideas       Folks a quick note regarding an some thoughts on the liquidation system that led to an idea.  A quick example that illustrates the idea:  Lets say OSM is at $200USD/ETH (just for easy calculation) and a new vault owner opens with 300ETH a vault for 20K DAI.   So their CR on inception is 300%.   All fine and dandy.   Now OSM drops to $100 putting them at the liquidation point.  So now they come under liquidation gun here.   The system as it is currently designed liquidates everything returning an\u2026     ",
                    "links": [],
                    "GPT-discussion-categories": [
                        "3rd party giving constructive criticism of proposal",
                        "3rd party extending to proposal",
                        "3rd party asking questions about proposal",
                        "None"
                    ],
                    "Sentiment": 6.268781975600158
                },
                {
                    "author_link": "https://forum.makerdao.com/u/LongForWisdom",
                    "index": "#7",
                    "likes": "4",
                    "time": "09/08/2020-18:09:46",
                    "content": "Hi all. Please note that the usual process for non-standard weekly polls is that there be a reasonable amount of time for discussion and visibility on the proposal before it moves to a vote. This particular non-standard weekly poll has been expedited on the authority of the Risk and Smart Contracts domain teams (details here), who both believe that it should be implemented sooner rather than later. Personally, I would like to see details on the code changes taking place, details of any audits that have been done (and reasoning against doing them if they haven\u2019t.) Please bear these details (or lack of them) in mind when voting in the poll on Monday. ",
                    "links": [],
                    "GPT-discussion-categories": [
                        "3rd party asking questions about proposal"
                    ],
                    "Sentiment": 5.275793650793651
                },
                {
                    "author_link": "https://forum.makerdao.com/u/Mariano_Conti",
                    "index": "#8",
                    "likes": "10",
                    "time": "10/08/2020-13:27:22",
                    "content": "Hi everyone. I think Charles, Wouter and Cyrus have already expressed why this is a good change for the protocol, but let me chime in as well. According to http://makervaults.descipher.io/ the largest ETH-A vault has 37m Dai debt, second largest has 30m. If any of these 2 vaults were to be liquidated (they\u2019re pretty safe right now) we\u2019d see an immediate liquidity crunch, as keepers try to bid on an extremely large amount of auctions. I believe the risk to the system would be high, since in case of the first vault, 290,000 ETH would be auctioned, in up to 2900 different and simultaneous auctions. The proposed change lets Maker Governance control to some extent the amount of simultaneous auctions that can occur at once. The proposed code is here https://github.com/makerdao/dss/pull/123 Changes to cat   box parameter, for max amount of Dai out for liquidation (as a rad)  lump becomes a rad (currently it\u2019s a wad) the bite function takes into account box to see if an auction can start  Changes to flip  Flippers now take cat as a parameter On deal (when an auction is finished) and yank (use during Emergency shutdown) there\u2019s a call to cat.scoop with the amount of dai recovered, to decrease the accumulator and let more dai be auctioned  Tests have been written and are available in flip.t.sol and  vat.t.sol, including:  test_set_lump_multiple_ilks testFail_lump_too_large test_cat_set_box test_partial_litterbox testFail_fill_litterbox test_partial_litterbox_multiple_bites  The code is public for the whole community to read and evaluate. We\u2019re reaching out to community members who\u2019ve reviewed code in the past. Hoping they can take a look. Available to answer any questions. Thank you. ",
                    "links": [
                        "https://github.com/makerdao/dss/pull/123",
                        "https://forum.makerdao.com/t/maker-relay-ep-8/3712"
                    ],
                    "GPT-discussion-categories": [
                        "3rd party giving constructive criticism of proposal",
                        "3rd party asking questions about proposal"
                    ],
                    "Sentiment": 6.128125
                },
                {
                    "author_link": "https://forum.makerdao.com/u/88_Black",
                    "index": "#9",
                    "likes": "0",
                    "time": "10/08/2020-15:25:59",
                    "content": "I\u2019d have a few question that I hope you can clarify:  What does it mean that system stakeholders can access the entire Dai market? How does Liquidations 2.0 help to reduce Dai price shocks? Will liquidations still be based on auctions? What\u2019s the upgrade timeline for Liquidations 2.0?  ",
                    "links": [],
                    "GPT-discussion-categories": [
                        "3rd party asking questions about proposal",
                        "3rd party giving constructive criticism of proposal"
                    ],
                    "Sentiment": 4.145833333333334
                },
                {
                    "author_link": "https://forum.makerdao.com/u/jernejml",
                    "index": "#10",
                    "likes": "0",
                    "time": "10/08/2020-17:55:00",
                    "content": "I believe most of your questions would be answered if you go through following posts: https://forum.makerdao.com/tag/liquidation-system I would start with the:     A Liquidation System Redesign: A Pre-MIP Discussion Proposal Ideas       If the auction doesn\u2019t recover any collateral, it typically means the ETH price is falling very fast (faster than the auction duration).  If you throttle liquidations for this reason, it just means MKR holder absorb bigger losses (assuming ETH price does not bounce back quickly).   Vault holder need to understand there is no guarantee that they will receive collateral back in the even of a liquidation.     It\u2019s possible that not all relevant posts are tagged, but are likely at least referenced. ",
                    "links": [
                        "https://forum.makerdao.com/t/a-liquidation-system-redesign-a-pre-mip-discussion/2790/51"
                    ],
                    "GPT-discussion-categories": [
                        "3rd party asking questions about proposal",
                        "3rd party extending to proposal"
                    ],
                    "Sentiment": 5.427777777777778
                },
                {
                    "author_link": "https://forum.makerdao.com/u/88_Black",
                    "index": "#11",
                    "likes": "0",
                    "time": "11/08/2020-06:29:13",
                    "content": "Thanks. Would still be good to have those questions addressed but not going to happen, I guess. ",
                    "links": [],
                    "GPT-discussion-categories": null,
                    "Sentiment": 7.25
                },
                {
                    "author_link": "https://forum.makerdao.com/u/jernejml",
                    "index": "#12",
                    "likes": "0",
                    "time": "11/08/2020-06:34:29",
                    "content": "    88_Black:  Will liquidations still be based on auctions?   In the above Pre-MIP link, it is written:    A Liquidation System Redesign: A Pre-MIP Discussion   The Smart Contracts Domain Team believes, given the design considerations above, that Dutch auctions are likely the optimal design solution. Dutch auctions, in which a high starting price is set, and then decreases deterministically over time, can address most of the design considerations discussed above and likely make the Maker Protocol more robust.   I don\u2019t think it\u2019s fair to expect forum users to address your questions, while you clearly did not demonstrate any effort. ",
                    "links": [],
                    "GPT-discussion-categories": [
                        "3rd party giving constructive criticism of proposal",
                        "3rd party asking questions about proposal"
                    ],
                    "Sentiment": 5.905952380952381
                },
                {
                    "author_link": "https://forum.makerdao.com/u/88_Black",
                    "index": "#13",
                    "likes": "0",
                    "time": "11/08/2020-06:38:30",
                    "content": "I saw Dutch auctions being mentioned but that covers just one of my questions. But I agree with you that I should have made more effort to find answers, I just assumed those would not be answered yet as nothing about it has been mentioned in this article which should be the most up-to-date place. ",
                    "links": [],
                    "GPT-discussion-categories": [
                        "3rd party asking questions about proposal"
                    ],
                    "Sentiment": 7.5
                },
                {
                    "author_link": "https://forum.makerdao.com/u/jernejml",
                    "index": "#14",
                    "likes": "3",
                    "time": "12/08/2020-05:46:47",
                    "content": "    charlesstlouis:  the Maker Foundation is working on a Liquidations 2.0 redesign that is currently in-progress and is aimed to be delivered in Q4 of this year   Regarding timeline\u2026 ",
                    "links": [],
                    "GPT-discussion-categories": [
                        "3rd party asking questions about proposal"
                    ],
                    "Sentiment": 5.0
                },
                {
                    "author_link": "https://forum.makerdao.com/u/williamr",
                    "index": "#15",
                    "likes": "1",
                    "time": "18/08/2020-10:12:27",
                    "content": "    MakerMan:  My concern is that this is another system parameter that will need to be tuned and I have no idea what scientific data we are going to use to tune it,   I would say we should have a reasonable dataset at least for benchmarking the scale of this from March 13 event. That can likely be used as a test data for a stress testing model. ",
                    "links": [],
                    "GPT-discussion-categories": [
                        "3rd party giving constructive criticism of proposal",
                        "3rd party asking questions about proposal"
                    ],
                    "Sentiment": 4.833333333333333
                },
                {
                    "author_link": "https://forum.makerdao.com/u/LongForWisdom",
                    "index": "#16",
                    "likes": "3",
                    "time": "18/08/2020-16:46:56",
                    "content": "Note that this was postponed for the time being so that the smart contracts team has time to write more tests before it is put to an executive vote. ",
                    "links": [],
                    "GPT-discussion-categories": null,
                    "Sentiment": 6.7857142857142865
                },
                {
                    "author_link": "https://forum.makerdao.com/u/Spidomo",
                    "index": "#17",
                    "likes": "0",
                    "time": "23/08/2020-16:50:23",
                    "content": "Strongly in favor of this liquidation auction upgrade. As the changes are complex, it would also be comforting to have the extra layer of security provided by an additional third party audit. ",
                    "links": [],
                    "GPT-discussion-categories": [
                        "3rd party giving entirely positive feedback on proposal",
                        "3rd party auditing and reviewing proposal",
                        "None",
                        "None",
                        "None"
                    ],
                    "Sentiment": 5.166666666666666
                },
                {
                    "author_link": "https://forum.makerdao.com/u/spin",
                    "index": "#18",
                    "likes": "2",
                    "time": "25/08/2020-08:29:03",
                    "content": "I was reviewing the code for this in dss (https://github.com/makerdao/dss/blob/ee01dab323bebf53dffca3218c089c85a4e380ec/src/cat.sol) and realized that this has potentially negative side effects when liquidations & keepers start to fragment and stop liquidating all collateral types. Right now the assumption is that box is an upper limit on all collateral types at auction but that is not going to hold true. There are several discussions around building specific liquidation mechanisms. This means that current cryptocurrency (ETH, BAT, ZRX, \u2026) keepers that mostly juts bid on these tokens and flip them on an exchange would have a given capacity to do so. If we now introduced liquidations for real world assets, or even centralized stablecoins that might attract a very different group of keepers that have a very different liquidity. Why not implement the box & litter as a variable that can be per \u201cfamily\u201d of collateral types? contract Loo {     mapping (bytes32 => bytes32) public family; // ilk => family     mapping (bytes32 => uint) public litter; // family => litter     mapping (bytes32 => uint) public box; // family => box          function ilkLitter(bytes32) public view {         return litter[family[ilk]];     }     // ...  }   ",
                    "links": [],
                    "GPT-discussion-categories": [
                        "3rd party giving constructive criticism of proposal",
                        "3rd party asking questions about proposal",
                        "3rd party auditing and reviewing proposal"
                    ],
                    "Sentiment": 5.345238095238095
                },
                {
                    "author_link": "https://forum.makerdao.com/u/spin",
                    "index": "#19",
                    "likes": "1",
                    "time": "25/08/2020-08:44:24",
                    "content": "If we were to turn on liquidations for fiat-backed stablecoins (USDC et al.) we\u2019d likely already see keepers behave differently when buying these vs. other collateral types: buying up USDC at auction without being able to liquidate it immediately will still require a lot of liquidity from keepers but it won\u2019t expose a keeper to a lot of exchange risk if they hold on to avoid slippage in the market. ",
                    "links": [],
                    "GPT-discussion-categories": [
                        "3rd party giving constructive criticism of proposal",
                        "3rd party asking questions about proposal"
                    ],
                    "Sentiment": 5.46875
                },
                {
                    "author_link": "https://forum.makerdao.com/u/cmooney",
                    "index": "#20",
                    "likes": "1",
                    "time": "25/08/2020-14:37:34",
                    "content": "Thanks for the comment @spin.  Ultimately, LIQ-1.2 is an interim patch before we release LIQ-2.0.  This solves a major risk that we have today; however, if we were to imagine a liquidation model for a real-world asset, we would just simply enable a different liquidation mechanism. Our current mechanism, and that envisioned in LIQ-2.0, is designed for tokenized assets that have healthy liquid markets.  While I think we all want that for real world assets, it stands to reason the novelty of those assets and regulatory restrictions are going to necessitate alternative liquidation mechanisms. I will say, having a collateral specific box parameter is under consideration for LIQ-2.0.  Because, as you point out, one may not be able to fine 20 million of Dai liquidity for some novel asset.  I am leaning towards box being the overall liquidation limit for Dai, in the same way we have Line as the overall debt ceiling, with each ilk having a more granular limit configured. ",
                    "links": [],
                    "GPT-discussion-categories": [
                        "3rd party giving constructive criticism of proposal",
                        "3rd party asking questions about proposal",
                        "None of the topics listed match",
                        "None of the topics listed match"
                    ],
                    "Sentiment": 5.793055555555555
                },
                {
                    "author_link": "https://forum.makerdao.com/u/spin",
                    "index": "#21",
                    "likes": "1",
                    "time": "25/08/2020-16:11:57",
                    "content": "I understand the tradeoffs and agree that having it is likely better than not having it at all even if we add other assets to the mix. However for Liquidation 2.0, this feature should probably not go into the Cat the way it is now as it would be impossible to use a custom mechanism that was not affected by this behavior. Glad to hear you are thinking about making it per-ilk in LIQ-2. Probably you would want to group it into something that is more than one ilk though. Anything where the default liquidation path or keeper group is very similar should share the same box if we are concerned about the keeper\u2019s liquidity. Especially given that all of the collateral we have to today has very heavy correlation it would not make sense to have separate box parameters per collateral. ",
                    "links": [],
                    "GPT-discussion-categories": [
                        "3rd party giving constructive criticism of proposal",
                        "3rd party asking questions about proposal"
                    ],
                    "Sentiment": 5.224166666666666
                },
                {
                    "author_link": "https://forum.makerdao.com/u/yaronvel",
                    "index": "#22",
                    "likes": "2",
                    "time": "26/08/2020-08:39:34",
                    "content": "In case it is not too late, i would kindly ask that the cat would expose the tab calculation as a public function, and will be more than happy to submit a PR with tests for it, if i would get an indication that it will be considered for a merge. EDIT: A PR was submitted I am referring to this line in the code   github.com   makerdao/dss/blob/master/src/cat.sol#L163   // This may leave the CDP in a dusty state vat.grab(     ilk, urn, address(this), address(vow), -int256(dink), -int256(dart) ); vow.fess(mul(dart, rate));  { // Avoid stack too deep     // This calcuation will overflow if dart*rate exceeds ~10^14,     // i.e. the maximum dunk is roughly 100 trillion DAI.     uint256 tab = mul(mul(dart, rate), milk.chop) / WAD;     litter = add(litter, tab);      id = Kicker(milk.flip).kick({         urn: urn,         gal: address(vow),         tab: tab,         lot: dink,         bid: 0     }); }       A similar function exists in compound as an API (in their smart contract). The motivation is that we are working on an opt-in liquidation system that needs to read the liquidation penalty value from makerdao\u2019s cat. We plan to read the cat address from the end contract, but changes like in this version, where the chop resolution changed from rad to wad will break our system (in the future, it is still not deployed). Hence, a function that for a given art (and maybe also rate) returns the tab, would really help. ",
                    "links": [
                        "https://github.com/makerdao/dss/blob/master/src/cat.sol#L163",
                        "https://github.com/makerdao/dss/blob/master/src/cat.sol#L163"
                    ],
                    "GPT-discussion-categories": [
                        "3rd party asking questions about proposal"
                    ],
                    "Sentiment": 5.630952380952381
                },
                {
                    "author_link": "https://forum.makerdao.com/u/Guy",
                    "index": "#23",
                    "likes": "2",
                    "time": "26/08/2020-13:06:04",
                    "content": "Is there a reason why support for automated \u201cauctions\u201d via DEXs should not be added to the Protocol itself? I.e. in the event of relatively small liquidations, the Protocol could use spare Dai from the Surplus Buffer or a designated pool to purchase Vault collateral, then cycle the assets bought through DEXs to replenish the Dai spent, plus a bit. Keepers and external auctions would still be relied on at times of higher demand or if the desired price cannot be met. ",
                    "links": [],
                    "GPT-discussion-categories": [
                        "3rd party giving constructive criticism of proposal",
                        "3rd party asking questions about proposal"
                    ],
                    "Sentiment": 4.875
                },
                {
                    "author_link": "https://forum.makerdao.com/u/cmooney",
                    "index": "#25",
                    "likes": "2",
                    "time": "26/08/2020-14:46:04",
                    "content": "    spin:  Anything where the default liquidation path or keeper group is very similar should share the same box if we are concerned about the keeper\u2019s liquidity. Especially given that all of the collateral we have to today has very heavy correlation it would not make sense to have separate box parameters per collateral.   WBTC and ETH are very heavily correlated, but perhaps we don\u2019t want to liquidate more than we think keepers can cycle for a collateral type.  So for ETH this limit would be very high as it\u2019s the chain\u2019s native currency, but for WBTC keepers may only be able to cycle X amount of it before crashing the price further on ethereum, meaning they would need to use centralized exchanges or RenVM.  I make this point just to show, even with more liquid tokenized assets, not all liquidity is equal and thus we probably want this level of granularity. ",
                    "links": [],
                    "GPT-discussion-categories": [
                        "3rd party giving constructive criticism of proposal",
                        "3rd party asking questions about proposal",
                        "None of the topics listed match",
                        "None of the topics listed match"
                    ],
                    "Sentiment": 5.495
                },
                {
                    "author_link": "https://forum.makerdao.com/u/cmooney",
                    "index": "#26",
                    "likes": "0",
                    "time": "26/08/2020-15:05:01",
                    "content": "    yaronvel:  The motivation is that we are working on an opt-in liquidation system that needs to read the liquidation penalty value from makerdao\u2019s cat . We plan to read the cat address from the end contract, but changes like in this version, where the chop resolution changed from rad to wad will break our system (in the future, it is still not deployed). Hence, a function that for a given art (and maybe also rate ) returns the tab , would really help.   One can read the tab post-bite() from the flippers:   github.com   makerdao/dss/blob/master/src/flip.sol#L55-L67  // --- Data --- struct Bid {     uint256 bid;  // dai paid                 [rad]     uint256 lot;  // gems in return for bid   [wad]     address guy;  // high bidder     uint48  tic;  // bid expiry time          [unix epoch time]     uint48  end;  // auction expiry time      [unix epoch time]     address usr;     address gal;     uint256 tab;  // total dai wanted         [rad] }  mapping (uint256 => Bid) public bids;       I assume you want this in the cat because you want to do the bite()?  For LIQ-1.2 we have already frozen the code.  However, for LIQ-2.0 we will have a new contract called the dog that does the dutch auction liquidations.  Typically, one can just read the values from our contracts and do the computation of tab, but your point is very well taken about changing the magnitudes of chop for example.  We struggled with changing this and lump to dunk as it could be considered a breaking change. We\u2019ve missed the opportunity to semver all our contracts, but we are working on a registry that holds meta-information about MCD.  We have the ilks, the cat, and create an easy way to iterate over those values.  We have been discussing adding versioning to this registry for MCD.  That is, you check the version from the registry and we would indicate to you if this was a patch change, we added an interface, or in the case of LIQ-1.2 if it was a breaking change.  If we were doing this today, MCD would see a version bump from the LIQ-1.2 change set because of what was highlighted above. Would this semver be enough for you to at least hard lock your contracts to a specific version and have them pause to be terminated if the version indicated a breaking change that required an upgrade? As for adding the interface for tab, I think this might be a design pattern we can consider going forward.  We have explicitly chosen not to do these changes in the past, but that is more because they were submitted at the 11th hour without us having the ability to fully consider the implications.  For example: https://github.com/makerdao/dss/pull/98 So, while we can\u2019t include this for LIQ-1.2, I am still interested in your answer to my questions above about needing this in the cat and if a semver would work for you.  Your feedback can help us in LIQ-2.0. ",
                    "links": [
                        "https://github.com/makerdao/dss/blob/master/src/flip.sol#L55-L67",
                        "https://github.com/makerdao/dss/pull/98"
                    ],
                    "GPT-discussion-categories": [
                        "3rd party giving constructive criticism of proposal",
                        "3rd party asking questions about proposal",
                        "3rd party or author wants to collaborate on proposal",
                        "None of the topics listed match"
                    ],
                    "Sentiment": 5.242045454545455
                },
                {
                    "author_link": "https://forum.makerdao.com/u/LongForWisdom",
                    "index": "#27",
                    "likes": "0",
                    "time": "26/08/2020-15:05:50",
                    "content": "    cmooney:  dog   I\u2019m dying. ",
                    "links": [],
                    "GPT-discussion-categories": null,
                    "Sentiment": 5.0
                },
                {
                    "author_link": "https://forum.makerdao.com/u/cmooney",
                    "index": "#28",
                    "likes": "2",
                    "time": "26/08/2020-15:15:11",
                    "content": "    Guy:  Is there a reason why support for automated \u201cauctions\u201d via DEXs should not be added to the Protocol itself? I.e. in the event of relatively small liquidations, the Protocol could use spare Dai from the Surplus Buffer or a designated pool to purchase Vault collateral, then cycle the assets bought through DEXs to replenish the Dai spent, plus a bit. Keepers and external auctions would still be relied on at times of higher demand or if the desired price cannot be met.   I like how you\u2019re thinking about this.  For now, it\u2019s that secondary step where the protocol would still need to cycle that collateral out through other DEXes that makes getting the Dai from the surplus buffer no better an option than just flash lending the collateral and taking that to DEXes. There is an existing discussion of flash lending unbacked (mint()/burn()) Dai, and using this in liquidations was also considered attractive; however, it\u2019s still not as gas efficient as just flash lending the collateral and expecting Dai in return.  I think this will be true for any strategy that needs to engage with DEXes. There is one additional strategy from governance and risk chat that @wil worked up where we can just allow the auction participant to show up with enough collateral to recapitalize the Vault, and they get a new Vault with enough collateral to have a safe CR, and some Dai debt.  This might be the most efficient, and has the bonus of not creating more Dai demand in a flash crash. ",
                    "links": [],
                    "GPT-discussion-categories": [
                        "3rd party giving constructive criticism of proposal",
                        "3rd party extending to proposal",
                        "3rd party asking questions about proposal",
                        "3rd party or author wants to collaborate on proposal"
                    ],
                    "Sentiment": 5.670454545454545
                },
                {
                    "author_link": "https://forum.makerdao.com/u/cmooney",
                    "index": "#29",
                    "likes": "2",
                    "time": "26/08/2020-15:16:43",
                    "content": "    LongForWisdom:  I\u2019m dying   The memes are so good.  bite() -> bark(), box -> hole, litter -> dirt, claw() -> bone(). ",
                    "links": [],
                    "GPT-discussion-categories": null,
                    "Sentiment": 8.5
                },
                {
                    "author_link": "https://forum.makerdao.com/u/befitsandpiper",
                    "index": "#30",
                    "likes": "0",
                    "time": "26/08/2020-15:24:00",
                    "content": "Someday maybe we\u2019ll have a mouse too\u2026 ",
                    "links": [],
                    "GPT-discussion-categories": null,
                    "Sentiment": 5.0
                },
                {
                    "author_link": "https://forum.makerdao.com/u/yaronvel",
                    "index": "#31",
                    "likes": "0",
                    "time": "26/08/2020-15:35:17",
                    "content": "Thanks a lot for the detailed answer. Some parts i am not sure i understood, but let me try to answer anw (also note that i opened a more general thread about it here, so maybe we should continue the discussion there).   First very short into on what i am currently building: it is an alternative cdp managers, where users give priority to specific liquidators to liquidate them (where the goal here is to provide more dedicated liquidators to makerdao and shift the MEV to makerdao users - can read more here). And I want to promise the end user exactly same conditions as he get with the current cdp manager. Hence I need to know what chop is.   Given (1), reading tab from flipper will not help, as in my system it will be liquidated not via the cat nor the flipper. I want to emulate the bite process, but not to execute it.   Meta information could be very useful if the makerdao governance is the one who sets it (and hence, using it does not compromise the security guarantees).   Just knowing that a contract is obsolete is something i can do now, by checking if vat relies on certain contract. So for me specifically it will not help a lot. But i imagine it could be useful to others.   I did not understand if semver would include \u201cget latest\u201d function to return the address of the most latest version.   I don\u2019t have a problem to calculate tab myself. and i imagine it will not change very frequently. I was just trying to catch the opportunity to do it before the next upgrade, and totally understand why the code is on freeze.   More generally i understand the makerdao is fully upgradable system, and could be changed in ways we cannot even predict. From my side i am designing my system such that a change in makerdao will not compromise user funds (but will force me to redeploy). It is an open question how makerdao governance could give some reasonable guarantees to early stage projects about future upgrades. In the current settings, my guess is that projects are just YOLOing, and de-facto force the governance to avoid certain changes if the project gets too big. E.g., if a change would break compound. That said, I don\u2019t have anything smart to say about that, and a registry would definitely satisfy me at this point.   ",
                    "links": [
                        "https://medium.com/b-protocol/b-protocol-b6dd4e3bf9c0"
                    ],
                    "GPT-discussion-categories": [
                        "3rd party asking questions about proposal",
                        "3rd party giving constructive criticism of proposal",
                        "3rd party extending to proposal",
                        "None of the topics listed match",
                        "None of the topics listed match"
                    ],
                    "Sentiment": 5.827705627705628
                },
                {
                    "author_link": "https://forum.makerdao.com/u/talbaneth",
                    "index": "#32",
                    "likes": "0",
                    "time": "31/08/2020-15:39:00",
                    "content": "I think there is some problem with the new bite function implementation that calculates lot wrongly.   github.com   makerdao/dss/blob/master/src/cat.sol#L131  function file(bytes32 ilk, bytes32 what, address flip) external note auth {     if (what == \"flip\") {         vat.nope(ilks[ilk].flip);         ilks[ilk].flip = flip;         vat.hope(flip);     }     else revert(\"Cat/file-unrecognized-param\"); }  // --- CDP Liquidation --- function bite(bytes32 ilk, address urn) external returns (uint256 id) {     (,uint256 rate,uint256 spot,,uint256 dust) = vat.ilks(ilk);     (uint256 ink, uint256 art) = vat.urns(ilk, urn);      require(live == 1, \"Cat/not-live\");     require(spot > 0 && mul(ink, spot) < mul(art, rate), \"Cat/not-unsafe\");      Ilk memory milk = ilks[ilk];     uint256 dart;     {         uint256 room = sub(box, litter);       For some reason it involves dunk (fka lump) in the lot calculation, even if lump is much bigger than the collateral. Let\u2019s take the following case (disregarding resolutions/decimals): ink = 2 eth, art = 100 dai, dunk = 50 eth, rate = 1, chop = 1.13, room = 30M dai The previous calculation used to be simple: uint lot = min(ink, ilks[ilk].lump) = min(2,50) = 2 eth The new lot calculations is: dart = min(art, mul(min(milk.dunk, room), WAD) / rate / milk.chop); dink = min(ink, mul(ink, dart) / art); lot = dink So now we get: dart = min(100, 50 / 1.13) = 44.2 lot = dink = min(2, 2 * 44.2 / 100) = 0.88 so suddenly lot is 0.88 eth I suspect this is not the original intention. ",
                    "links": [
                        "https://github.com/makerdao/dss/blob/master/src/cat.sol#L131"
                    ],
                    "GPT-discussion-categories": [
                        "3rd party giving constructive criticism of proposal",
                        "3rd party asking questions about proposal"
                    ],
                    "Sentiment": 4.991391184573003
                },
                {
                    "author_link": "https://forum.makerdao.com/u/LongForWisdom",
                    "index": "#33",
                    "likes": "2",
                    "time": "31/08/2020-16:01:57",
                    "content": "I can\u2019t really tell you much about whether you\u2019re right here. One thing, though: dunk is denominated in DAI, not in ETH. Is that breaking your calculations? ",
                    "links": [],
                    "GPT-discussion-categories": [
                        "3rd party asking questions about proposal",
                        "3rd party giving constructive criticism of proposal"
                    ],
                    "Sentiment": 6.142857142857143
                },
                {
                    "author_link": "https://forum.makerdao.com/u/galabasquer",
                    "index": "#34",
                    "likes": "3",
                    "time": "31/08/2020-16:50:28",
                    "content": "Considering dunk as lump is actually the problem. Renaming to dunk was indeed in purpose as it is measured in another token unit. The actual dunk of each collateral is 50,000 DAI. ",
                    "links": [],
                    "GPT-discussion-categories": [
                        "3rd party asking questions about proposal"
                    ],
                    "Sentiment": 5.0
                },
                {
                    "author_link": "https://forum.makerdao.com/u/talbaneth",
                    "index": "#36",
                    "likes": "2",
                    "time": "31/08/2020-17:47:22",
                    "content": "I see, that explains it. Thanks. ",
                    "links": [],
                    "GPT-discussion-categories": null,
                    "Sentiment": 6.0
                }
            ]
        }
    ],
    "group_index": "2576"
}