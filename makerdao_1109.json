{
    "poll_list": [],
    "discourse_list": [
        {
            "thread_link": "https://forum.makerdao.com/t/rwa008-ofh-mip21-token-ces-domain-team-assessment/15239",
            "title": "[RWA008] OFH/MIP21 Token CES Domain Team Assessment ",
            "index": 15239,
            "category": [
                "Collateral Onboarding",
                "Domain Work"
            ],
            "tags": [
                "sc-domain-work",
                "ces-001",
                "rwa-008",
                "ces-domain-work",
                "socgen"
            ],
            "content": [
                {
                    "author_link": "https://forum.makerdao.com/u/lollike",
                    "index": "#1",
                    "likes": "12",
                    "time": "17/05/2022-19:25:36",
                    "content": " General Information The previous assessments of RWA006 and RWA007 were used as a general template for this assessment as many implementation details are the same for RWA008. This assessment deviates from the standard smart contract technical assessment format because of the idiosyncratic nature of the RWA collateral type. In summary, due to the simple and risk contained nature of the proposed system, and the fact that the majority of the components are already used in production these smart contracts are considered low risk.   Symbol: RWA008  Token Name: RWA-008 Ilk Registry name: RWA008-A: SG Forge OFH  Relevant MIP information:  [Security Tokens Refinancing] MIP6 Application for OFH Tokens MIP21: Real World Assets - Off-Chain Asset Backed Lender    Total supply: 1 WAD (1 * 10 ^ 18)  Does the contract implement the ERC20 token standards? Yes.  RWA institutional website: societegenerale.com   RWA project website: OFH press release   Github repository:   https://github.com/clio-finance/socgen-ofh-onboarding   https://github.com/clio-finance/mip21-toolkit     Can use an existing MCD collateral type adapter? Yes, this collateral uses the MIP21 authed join and exit functions.   Technical Information   Does the contract implement the ERC20 token standards? Yes.  Compiler version: solidity:0.6.12   Decimals: 18.  Overflow checks: Yes.  Mitigation against allowance race-condition: No.  Upgradeable contract patterns: No.  Access control or restriction lists: No.  Non-standard features or behaviors: No.  Key addresses:  The auth governance address for RwaInputConduit, RwaLiquidationOracle and RwaUrn contracts. The operator address that is permitted to operate on the RwaInputConduit and RwaUrn contracts. This can be multiple addresses, however, each address must be approved by governance. The mate address controlled by the security agent DIIS Group that is permitted to call push() on the RwaInputConduit and RwaOutputConduit to transfer Dai in and out of the conduits respectively, but does not have any privileges within the token contract itself.    Additional notes:  While there are no overflow checks, no use of a SafeMath library, and no mitigation against the allowance race-condition, the idiosyncratic nature of the contract does not make them a requirement.     Implementation Design Rationale While the target collateral asset (the OFH tokens, representing covered bonds) for onboarding actually exists \u201con chain\u201d, it cannot be easily integrated directly into the Maker Protocol due to a number of technical factors outlined in more detail in the sections below. Furthermore, because no freely accessible price data exists that can be pushed on chain for public consumption, it is difficult to construct a price Oracle for the OFH tokens. Additionally there are no on chain markets where these assets can be sold in the event of a liquidation, making liquidations an \u201coff chain\u201d event. Lastly, the OFH tokens have KYC requirements, which means that they cannot be freely traded on Ethereum. Due to these facts, it was decided that the MIP21 implementation structure would be utilized to implement the vault, instead of trying to integrate the OFH token directly into the Maker Protocol as a \u201cfirst class collateral\u201d like ETH. However we are committed to work with SGF to iterate and improve the technical setup to automate the management of the collateral for potential future deals. Since OFH tokens will not be onboarded directly into the Maker Protocol, SGF will instead transfer the OFH tokens to the RwaUrn contract, which can be verified by anyone (e.g. through Etherscan), such that it holds the OFH tokens while the Vault is active. This will improve the transparency of the state of Vault. SGF will covenant to maintain the registration in the OFH token internal balance, and failure to do so will be subject to a liquidation event. The registration and maintenance covenants are backstopped by the French law pledge agreement, whereby SGF pledges the OFH tokens to Maker (through DIIS Group). RWF and incubating LTS will elaborate on these risks in the Risk Assessment.  Architecture  SocGen OFH Token  Closed source. Has been thoroughly reviewed by the Collateral Engineering Services Core Unit under the supervision of the Protocol Engineering Core Unit. Does not conform to ERC20 standard, meaning it cannot be onboarded directly into the Maker Protocol. Lacks allowance mechanisms as well as race-conditions mitigation and a transferFrom() method. Indivisible (0 decimals). Would not function properly during Emergency Shutdown if onboarded directly into the Maker Protocol, due to the lack of conformity with the ERC20 standard. Complex token semantics and logic. Because of the bullet points above, the OFH token will not be onboarded directly into the Maker Protocol. Instead, a RWA-008 token will be utilized in the Maker Protocol to enable Dai generation, similarly to other MIP21-style vaults. As described above, in addition SGF will transfer OFH tokens to the RWAUrn which will hold the tokens while the Vault is active. The Pledge will further evidence Maker\u2019s interest the OFH token.   MIP21 Contracts MIP21 is the component that prevents the borrower from minting more Dai than the Debt Ceiling (line) and provides the ability for Maker Governance to trigger a liquidation. MIP21 by itself does not ensure that enough collateral is present or that the legal agreements underpinning the relationship are sound. The core RWA architecture consists of the following contracts:  RwaToken RwaUrn RwaConduit RwaLiquidationOracle   MIP21 Modifications Minor modifications were made to the standard MIP21 technical implementation to meet the operational and legal requirements of the parties:  The MKR balance requirement to transfer Dai in and out of the RwaConduit via push() was replaced with a simple whitelist. DIIS Group, the security agent of this agreement, will be the whitelisted actor to call this function. SocGen will also be whitelisted as a backup for technical reasons, but does not intend to use the function under normal use for legal reasons. Removed the need for Maker Governance to whitelist recipients (to) of \u201cpushed\u201d Dai in the RwaOutputConduit. This means that Maker Governance does not need to approve recipients of Dai generated from the vault in an executive spell, instead we leave this to the discretion of SocGen to decide freely where to route generated Dai. Modified the exit function to allow the operator of the RwaUrn (SocGen) to withdraw Dai deposited into RwaUrn to the RwaOutputConduit, e.g. in case excess Dai is deposited by accident. Previously this function could only be called during emergency shutdown. However, if SocGen by accident were to send more Dai than their outstanding debt, there is no easy way to recover the excess Dai. Even in the instance they pay back Dai to the RwaUrn, but decide they do not want to repay their loan yet, there is no way to transfer the Dai back from the RwaUrn, thus the only way to get Dai back would be to pay down the debt and generate new Dai. This change in the function makes the operation of the vault more flexible, and removes some potential operational issues, without introducing additional risks.  These changes are simple in nature and were done under the supervision of the Protocol Engineering Core Unit, and does not impose any added technical risk to the Maker Protocol itself.  RwaToken Source code A standard implementation of the ERC20 token standard, with the balanceOf(address) of the deployer of the contract being set to 1 WAD at deployment. There are 18 decimals of precision. There are three state changing functions, that are all available to the tokenholder, and are specific to the ERC20 token standard:  transfer(address dst, uint wad) external returns (bool); transferFrom(address src, address dst, uint wad) public returns (bool); approve(address usr, uint wad) external returns (bool);   RwaUrn Source code The RwaUrn is unique to each MIP21 collateral type. Aside from the core DSS wards, can, rely(address), deny(address), hope(address), and nope(address) functions, there are five functions:  file(bytes32,address) lock(uint256) free(uint256) draw(uint256) wipe(uint256) exit(uint256)  The file function can only be called by governance (via the auth modifier). The rest of the functions can only be called by those who have been given operator permission (hoped or noped) on the RwaUrn contract. And any Dai drawn by the RwaUrn can only be sent to the RwaOutputConduit address defined by governance when deploying the contract. Note: The exit function was modified to allow the operator to withdraw Dai deposited in the RwaUrn to RwaOutputConduit, as explained in the modifcations section above.  RwaConduits Source code The RwaInputConduit and RwaOutputConduit are two simple contracts aimed at handling Dai routing. RwaOutputConduit has two main functions: pick(address) and push().   pick(address) can be called by actors who have been whitelisted using hope(address) to specify an Ethereum address that Dai should be routed to. The push() function holds transitory funds, that upon being called, are transferred to the to address set using the pick(address).   Note: The push() function has been modified from standard MIP21, and can now only be called by actors who have been whitelisted using the mate(address)function - in this case DIIS Group and SG Forge. Furthermore, it is no longer necessary for Maker Governance to authorize the to address through kiss. In this implementation, we allow SGF to send the generated Dai to whichever address they desire, with no limitation from Maker Governance.    RwaInputConduit functions in a very similar manner, but lacks the pick(address) method as routing of Dai can only happen to RwaUrn.  RwaLiquidationOracle Source code The RwaLiquidationOracle contract consists of six state-changing functions (besides the usual DSS rely(address), deny(address)), all protected by the auth modifier and can only be called by governance:  file(bytes32,address) init(bytes32 ilk,bytes32 val,address doc,uint48 tau) bump(bytes32 ilk,uint256 val) tell(bytes32) cure(bytes32) cull(bytes32)  There is one externally accessible view function called good(bytes32) that anyone can use to check the liquidation status of the position. This function does not change the contract state. This is not a typical Maker oracle. It will only report on the liquidation status of the RwaUrn, and can only be acted upon by governance. To state it plainly, this oracle is not vulnerable to flash loan attacks or any manipulation aside from a governance attack. file can be called by governance to change the vow address (used in cull). init is the initialization function. It takes 4 parameters:   ilk: name of the vault, in this case, RWA008.  val: estimated value of the collateral token.  doc: link to legal documents representing the underlying legal scheme.  tau: minimum delay between the soft-liquidation and the hard-liquidation/write-off.  bump can be called by governance to increase or decrease the estimated value of the collateral. tell can be called by governance to start a soft-liquidation. cure can be called by governance after a soft-liquidation has been triggered to stop it. cull can be called by governance to start a hard-liquidation/write-off. This will mark all the remaining debt of the vault as bad debt and impact the Surplus Buffer (vow).  Overview of technical setup and actors The following diagrams showcase the high level technical setup and flow of funds (Maker smart contracts in Orange, SGF smart contracts in blue) and the involved actors (grey).  Untitled presentation (1)3000\u00d71688 245 KB  The figure above outlines the steps to borrow Dai. Step 1, 2, 3: Societe Generale Forge (SGF) will in step 1, 2, and 3 call various functions in the OFH token to register RWAUrn as the holder of the OFH tokens. This registration represents, in the OFH token, a transfer to the RWAUrn contract. MakerDAO will have visibility on the registration in the OFH token. Step 4: SGF will lock the RWA-008 token, which will be provided to them through an executive spell, into the RwaUrn. This step only needs to be done once, when SGF initially opens the Vault, and is purely a technical step to allow Dai generation in the Maker Protocol, the RWA-008 token does not represent the underlying collateral Step 5: Once the RWA-008 token is locked, SGF can call draw to generate Dai, which is immediately sent to the RwaOutputConduit contract. Step 6: Afterwards, SGF will call pick to choose a recipient address (in normal cases they themselves will be the recipient) of the drawn Dai. Step 7: Finally, in order to finalize this transfer, DIIS group, the security agent, must call push to transfer the Dai to the recipient that SGF specified. The Dai tokens should now be in the custody of the recipient, in this case SGF.  Onboarding OFH Token Into Maker Protocol v3 (2)3000\u00d71688 186 KB  The figure above outlines the steps to repay Dai. Step 1: SGF transfers Dai to the RwaInputConduit. Step 2: DIIS group verifies the transaction in the provided UI, and executes the function push to transfer Dai to the RwaUrn. Step 3: SGF calls wipe to repay Dai debt in the Vault. Step 4, 5, 6: SGF calls 3 functions on the OFH token to release the pledged tokens from the RwaUrn, and transferring them to SGF.  Contract Risk Summary Risk Analysis Conclusion: Low technical risk The RWA code implementation resides within a sandbox-like environment, and any operation not related to locking, freeing, drawing, or wiping in the RwaUrn contract must be voted on by governance. The code itself is lightweight. This implementation uses simplified Oracle and Urn contracts to achieve the functionality required for this specific instance of RWA. Furthermore, MIP21 contract have been live in production for over a year, and are thus deemed low risk to reuse for this implementation. Slight modifications were made to the standard MIP21 contract to support legal and operational requirements of the parties. These modifications were simple and do not present additional considerable complexity or liability to the contracts. To once again summarize the changes were:  Make push a whitelisted function in RWA Conduits. Remove requirement for Maker Governance to whitelist recipient addresses of generated Dai Allow operators of the RwaUrn to withdraw Dai sitting in the contract to the RwaOutputConduit.  These changes are implemented in MIP21, which is already a sandboxed environment that does not have direct authorizations on the MCD core contracts, and thus does not pose any direct technical risks to the Maker Protocol Core itself.  Supporting Materials  UX Improvements To further facilitate the usability of RWA-008, CES has built a UI for the security agent to help facilitate the transfer of Dai in and out of the conduits. These can be reused for any similar future deal, to lower the barrier for third parties to interact with the Vaults. The repository can be found here: https://github.com/clio-finance/diis-group-ui This tool will be actively used by SocGen and DIIS Group to manage on-chain processes. CES has also created a contract called RwaUrnProxyView, that help calculate accrued stability fee for a future timestamp. These functions are out of scope of the assessment, as they are only user facing and do not pose any technical risks directly to the Maker Protocol. Furthermore CES is deploying an onchain RWA token factory, to further automate the process of deploying MIP21-style loan agreements.  S\u016brya Description Report  Files Description Table     File Name SHA-1 Hash     RwaInputConduit2.sol 9bf23537fcb5cbce505aeaee14df3e273333e0f4   RwaOutputConduit2.sol 3f7cbfa8b41239a3a74c8d95e50af936f565d7bd   RwaToken.sol 8d75732d93e0ad82a7bf3e0faf34550082291775   RwaUrn2.sol ce511f510a5d456cf686a9f64a5b46a064043c31   RwaLiquidationOracle.sol 88c2b4fac899d39af0198c1fb4776171e4249c19     Contracts Description Table |  Contract  |         Type        |       Bases      |                  |                 | |:----------:|:-------------------:|:----------------:|:----------------:|:---------------:| |     \u2514      |  **Function Name**  |  **Visibility**  |  **Mutability**  |  **Modifiers**  | |||||| | **RwaInputConduit2** | Implementation |  ||| | \u2514 | <Constructor> | Public \u2757\ufe0f | \ud83d\uded1  |NO\u2757\ufe0f | | \u2514 | rely | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | deny | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | mate | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | hate | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | push | External \u2757\ufe0f | \ud83d\uded1  |NO\u2757\ufe0f | |||||| | **RwaOutputConduit2** | Implementation |  ||| | \u2514 | <Constructor> | Public \u2757\ufe0f | \ud83d\uded1  |NO\u2757\ufe0f | | \u2514 | rely | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | deny | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | mate | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | hate | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | hope | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | nope | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | pick | Public \u2757\ufe0f | \ud83d\uded1  |NO\u2757\ufe0f | | \u2514 | push | External \u2757\ufe0f | \ud83d\uded1  |NO\u2757\ufe0f | |||||| | **RwaToken** | Implementation |  ||| | \u2514 | add | Internal \ud83d\udd12 |   | | | \u2514 | sub | Internal \ud83d\udd12 |   | | | \u2514 | <Constructor> | Public \u2757\ufe0f | \ud83d\uded1  |NO\u2757\ufe0f | | \u2514 | transfer | External \u2757\ufe0f | \ud83d\uded1  |NO\u2757\ufe0f | | \u2514 | transferFrom | Public \u2757\ufe0f | \ud83d\uded1  |NO\u2757\ufe0f | | \u2514 | approve | External \u2757\ufe0f | \ud83d\uded1  |NO\u2757\ufe0f | |||||| | **RwaUrn2** | Implementation |  ||| | \u2514 | <Constructor> | Public \u2757\ufe0f | \ud83d\uded1  |NO\u2757\ufe0f | | \u2514 | rely | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | deny | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | hope | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | nope | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | file | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | lock | External \u2757\ufe0f | \ud83d\uded1  | operator | | \u2514 | free | External \u2757\ufe0f | \ud83d\uded1  | operator | | \u2514 | draw | External \u2757\ufe0f | \ud83d\uded1  | operator | | \u2514 | wipe | External \u2757\ufe0f | \ud83d\uded1  |NO\u2757\ufe0f | | \u2514 | quit | External \u2757\ufe0f | \ud83d\uded1  |NO\u2757\ufe0f | | \u2514 | add | Internal \ud83d\udd12 |   | | | \u2514 | sub | Internal \ud83d\udd12 |   | | | \u2514 | mul | Internal \ud83d\udd12 |   | | | \u2514 | divup | Internal \ud83d\udd12 |   | | | \u2514 | rad | Internal \ud83d\udd12 |   | | |||||| | **RwaLiquidationOracle** | Implementation |  ||| | \u2514 | rely | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | deny | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | add | Internal \ud83d\udd12 |   | | | \u2514 | mul | Internal \ud83d\udd12 |   | | | \u2514 | <Constructor> | Public \u2757\ufe0f | \ud83d\uded1  |NO\u2757\ufe0f | | \u2514 | file | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | init | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | bump | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | tell | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | cure | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | cull | External \u2757\ufe0f | \ud83d\uded1  | auth | | \u2514 | good | External \u2757\ufe0f |   |NO\u2757\ufe0f |    Legend     Symbol Meaning      Function can modify state    Function is payable     Contract Inheritance Graph The smart contracts do not inherit other smart contracts.  Screenshot 2022-05-17 at 12.08.08|2846\u00d7174 84 KB   Contract Call Graph  CallGraphAll (2)|4001929\u00d716175 1.82 MB  ",
                    "links": [
                        "https://forum.makerdao.com/t/mip21-real-world-assets-off-chain-asset-backed-lender/3917",
                        "https://www.societegenerale.com/",
                        "https://www.societegenerale.com/en/news/newsroom/societe-generale-issued-first-covered-bond-security-token-public-blockchain",
                        "https://github.com/clio-finance/socgen-ofh-onboarding",
                        "https://github.com/clio-finance/socgen-ofh-onboarding",
                        "https://github.com/clio-finance/mip21-toolkit",
                        "https://github.com/clio-finance/mip21-toolkit",
                        "https://github.com/makerdao/dss-gem-joins/blob/c2ba746fd45593136475aa5e308a57db87e7eb7f/src/join-auth.sol",
                        "https://github.com/clio-finance/mip21-toolkit/blob/master/src/tokens/RwaToken.sol",
                        "https://github.com/clio-finance/mip21-toolkit/blob/master/src/urns/RwaUrn2.sol",
                        "https://github.com/clio-finance/mip21-toolkit/blob/master/src/conduits/RwaInputConduit2.sol",
                        "https://github.com/clio-finance/mip21-toolkit/blob/master/src/oracles/RwaLiquidationOracle.sol",
                        "https://github.com/clio-finance/diis-group-ui",
                        "https://github.com/clio-finance/diis-group-ui",
                        "https://github.com/clio-finance/diis-group-ui",
                        "https://github.com/clio-finance/socgen-ofh-onboarding/blob/master/src/RwaUrnProxyView.sol",
                        "https://github.com/clio-finance/mip21-toolkit/blob/master/src/tokens/RwaTokenFactory.sol",
                        "https://forum.makerdao.com/t/relay-semanal-26-de-julio-01-de-agosto-del-2022/17049",
                        "https://forum.makerdao.com/t/sg-forge-socgen-risk-assessment/15638",
                        "https://forum.makerdao.com/t/weekly-makerdao-recap/16382/7"
                    ],
                    "GPT-summary": null,
                    "GPT-proposal-categories": null,
                    "GPT-discussion-categories": null,
                    "Sentiment": 5.139780587659029
                },
                {
                    "author_link": "https://forum.makerdao.com/u/flipflopflapdelegate",
                    "index": "#2",
                    "likes": "0",
                    "time": "17/05/2022-20:43:16",
                    "content": "Great work @collateral-core-unit and congratulations on getting this assessment out and improvising\u2013good stuff. Question\u2013can the owner modify the wards at will? I believe in this case I\u2019m referring to DIIS as the \u201cowner\u201d\u2013hopefully that makes sense :)) ",
                    "links": [],
                    "GPT-discussion-categories": null,
                    "Sentiment": 8.25
                },
                {
                    "author_link": "https://forum.makerdao.com/u/lollike",
                    "index": "#3",
                    "likes": "5",
                    "time": "17/05/2022-21:02:31",
                    "content": "Thanks @flipflopflapdelegate ! Only Maker Governance will be authed (specifically the MCD_PAUSE_PROXY contract) as the owner of the contracts, so no, neither SGF or DIIS Group will be authed and cannot modify wards at will - only Maker Governance can do so through an executive vote. SGF and DIIS are only authorized to access functions that relate to the operations of the Vault, and do not have any \u201cadmin rights\u201d in the contracts. More specifically, SGF will be set as the operator role in the RwaUrn2 contract, which means that they can operate their Vault and have permissioned access to the following functions:  lock free draw  quit (permisionless after ES)  SGF will most likely also be the only ones calling wipe (repay debt), but this function is permissionless. DIIS group will be set as mate in the Conduits, giving them permissioned access to the following function:  push  Neither SGF or DIIS have access to change any authorization schemes in the contracts. ",
                    "links": [],
                    "GPT-discussion-categories": null,
                    "Sentiment": 5.75
                },
                {
                    "author_link": "https://forum.makerdao.com/u/cryptenthusiastic",
                    "index": "#4",
                    "likes": "0",
                    "time": "25/05/2022-00:54:28",
                    "content": "When RWAs are in place, the barrel of oil would be a key collateral to back Dai, because it has historically performed quite the opposite of the vast majority of assets in relation to seasonality and market cycles, apart from the fact that it will always be in demand and is a finite asset. PetroDai  ",
                    "links": [],
                    "GPT-discussion-categories": null,
                    "Sentiment": 5.0
                },
                {
                    "author_link": "https://forum.makerdao.com/u/system",
                    "index": "#5",
                    "likes": "0",
                    "time": "23/08/2022-00:55:18",
                    "content": "This topic was automatically closed 90 days after the last reply. New replies are no longer allowed. ",
                    "links": [],
                    "GPT-discussion-categories": null,
                    "Sentiment": 5.0606060606060606
                }
            ]
        },
        {
            "thread_link": "https://forum.makerdao.com/t/rwa009-hvbank-mip21-token-ces-domain-team-assessment/15861",
            "title": "[RWA009] HVBank/MIP21 Token CES Domain Team Assessment ",
            "index": 15861,
            "category": [
                "Collateral Onboarding",
                "Domain Work"
            ],
            "tags": [
                "sc-domain-work",
                "ces-001",
                "hvb",
                "rwa-009"
            ],
            "content": [
                {
                    "author_link": "https://forum.makerdao.com/u/dbkcan",
                    "index": "#1",
                    "likes": "14",
                    "time": "16/06/2022-20:16:46",
                    "content": "Author(s): David Krett (@dbkcan) Contributors: Henrique Barcelos (@hbarcelos) MIP6 Reference: https://forum.makerdao.com/t/mip6-huntingdon-valley-bank-loan-syndication-collateral-onboarding-application/14219/25   This assessment deviates from the standard smart contract technical assessment format because of the idiosyncratic nature of the RWA collateral type.  Risk Summary/Key Takeaways   The technical smart contract risk is considered LOW, as it will be using the standard MIP21 contracts with a manual liquidation oracle.   Whilst technical risk is considered low the proposed solution requires manual/human monitoring of off-chain data, which will require that there are clear processes in place for monitoring the ongoing performance of the collateral based on the reporting required by the various Actors involved in running the RWA Master Participation Trust, as all liquidation activities will require a governance vote.   Any technology or service required for the off-chain upkeeping of the deal will be the responsibility of the @Real World Finance (RWF) Core Unit. Below there is non-exhaustive list of the RWF responsibilities:  Perform the off-chain monitoring of the deal to ensure the debt funded up to the debt ceiling is no greater than the funding provided under purchased participations and the balance of the participation funding account held by RWA Master Participation Trust (RWA MPTrust). Provide or hire the infrastructure for storing the relevant documents off-chain.     As a result the technical assessment of these monitoring services is not in scope for this technical assessment.   Should MakerDAO wish to scale up this solution beyond the contemplated debt ceiling of DAI 100 million, CES recommends that modifications to the MP21 contracts and/or protocol contracts be considered to bring more transparency on chain with respect to the status of the investment at any point in time.   General Information Symbol: RWA009 Token Name: RWA-009 Ilk Registry Name: RWA009-A: HVBank Relevant MIP Information:  MIP6: Huntingdon Valley Bank Loan Syndication Collateral Onboarding Application MIP21: Real World Assets \u2013 Off-Chain Asset Backed Lender RWF / LTS Huntingdon Valley Bank (\u201cHVB\u201d) - RWA Collateral Onboarding Risk Assessment  Total Supply: 1 WAD (1 * 10 ^ 18) HV Bancorp Inc. website: https://www.myhvb.com/ Github Repository: GitHub - clio-finance/mip21-toolkit: MIP21 Toolkit: Equipment for Off-chain Asset Backed Lending in MakerDAO Collateral Type Adapter: The collateral will use the MIP21 authed join and exit functions.  Technical Information Implements ERC20 Token Standard: Yes Compiler Version: solidity:0.6.12 Decimals: 18 Overflow checks: Mitigation against overflow race-condition: No Upgradeable contract patterns: No Access control or restriction lists: No. Non-standard features or behaviours: No. Key addresses:  The auth governance address for RwaLiquidationOracle and RwaUrn contracts. The operator address that is permitted to operate on the RwaUrn contracts. This can be multiple addresses, however, each address must be approved by governance.  Additional notes:  The RWAToken uses a custom implementation of SafeMath. While there is no mitigation against the allowance race-condition, the idiosyncratic nature of the contract does not make them a requirement.   Transaction Outline   The ERC20 Token will act as a single token placeholder for up to 100 million USD or the agreed debt ceiling of real world loan participation certificates (Participations) to be sold by HV Bancorp Inc. (HVBank)   This ERC20 Token will act as a placeholder for the collateral to be held by MakerDAO\u2019s trust - RWA MPTrust. This real world collateral will be held by WSFS Bank - RWA MPTrust\u2019s trustee. The collateral held at any point in time will consist of:  The trust\u2019s Participation Funding Account (PFA) - which will be allowed to invest funds in US Government short term securities; and The trust\u2019s Authorized Investments Income Account (AIIA) - which will collect all income earned from the investment of the PFA in short term government securities; and The trust\u2019s Participation Receipts Account (PRA) - which will hold the monthly or regular remittances from HVBank for both income/fee and debt repayments received from the loans underlying the Participations purchased by RWA MPTrust; and Participation certificates purchased by RWA MPTrust from HVBank.    At any point of time the sum of the funds 1) in the PFA and 2) funds outstanding on the participation certificates above will not exceed the debt ceiling established by MakerDAO (under the assumption that the principal portion of any funds from the Participation Receipt Account have been moved to the PFA).   Participations will be sold by HVBank to the trust (RWA MPTrust) established for the benefit of MakerDAO and will be held by WSFS - as trustee for RWA MPTrust. Participations will be purchased from HVBank over a 12-18 month period and funded from the PFA. The PFA will be initially funded by minting 100 mm DAI upon governance approval and moving the converted US$ to the PFA.   On or before each purchase of a participation \u2013 the Calculation Agent - Ankura Trust Company LLC (Ankura) - will complete any necessary due diligence and will deliver and upload to off-chain storage and to RWA MPTrust verifying the proposed participation purchase meets the criteria detailed in the Master Participation Agreement. Upon receipt of the certification report and the relevant executed participation certificate RWA MPTrust will instruct WSFS to pay HVBank from the PFA any amounts required to fund the purchased participation.   As and when funds are received from the underlying loans of a Participation, HVBank will send RWA MPTrust\u2019s proportionate share of remittances to the WSFS trustee account (PRA). On a monthly basis, HVBank will provide a report to Ankura detailing the remittances made to the WSFS trustee account, including a split of the amounts of principal and interest or fees comprising the aggregate amount.   Any debt repayments for the underlying participations will be transferred to the PFA - controlled by the Trustee to either fund future participation purchases and/or to provide funding that may be required under existing participations held by the RWA MPTrust.   Any income/fees received under the Participations in the PRA (net of servicing costs) will be sent on a monthly basis to the Surplus Buffer.   Funds in the Trusts\u2019 investment income account (AIIA) will be sent bi-annually to the Surplus Buffer. The funds in this account are generated from the short term investment of funds in the Trust\u2019s Participation Funding Account. A result of the Trustee\u2019s standing instructions to invest \u201cidle\u201d cash on deposit in the accounts in \u201cAuthorized Investments\u201d ( to be defined as \u201can exchange traded fund or money market fund composed of United States treasury securities with a term of three (3) months or less).   Upon termination of the Master Participation Agreement the monies in the PFA - invested in short term govt securities, less any amounts required to fund participations which have not yet expired - will be paid to the urn. In addition, any debt repayments received on an ongoing basis up to the maturity date of each individual participation - will continue to be received in the PRA and on a monthly basis will be transferred to the urn, with any associated income/fee remittances from the underlying loans continuing to be paid on a monthly basis to the surplus buffer.   As the loans underlying participation will have different terms (revolving loans, amortizing term loans) and rate basis (some fixed and some floating), the expected yield due to Maker is variable, making it difficult to set a constant stability fee. As such, the actual monthly variable net yield from participations will be paid directly to the surplus buffer. Monthly servicing reports, reporting income collected per participation and by principal and interest divisions, will determine whether the participations in RWA MPTrust are in compliance with the terms contemplated in the Master Participation Agreement.   Sequence diagrams for the above transactions outline are detailed below.  Initial Funding/Purchases of Participations  1314\u00d7719 80 KB   Monthly Remittance of Payments and Reporting/Debt Repayments 1401\u00d7733 105 KB    Liquidation/Losses   Events of default that occur within the facility will be reported by the Calculation Agent through the uploads of monthly data. Liquidation of the HVBank vault will need to be triggered manually by someone in MakerDAO proposing a governance vote to initiate liquidation (tell() spell).   Write-Offs for participations will be recognized off-chain, and the amount of maximum participation funding adjusted and reported accordingly in the monthly report to be completed by Ankura the verification agent. Any on-chain write-offs will be recognized after the final participation repayments have been made to the RwaUrn. We understand that in the event there is debt to be written off, after all debt repayments have been received, RWA Foundation will be responsible for taking the necessary governance approvals to cull() any written-off debt that remains outstanding after final repayments have been received.    Emergency Shutdown  In the event of Emergency Shutdown we understand that RWA Foundation (the trust sponsor and entity responsible for executing MKR tokens holders governance decisions) will be responsible for ensuring that the RWAJar and RWAUrn contract addresses are updated with Genesis, such that payment can continue to be received for any successor deployments or DAI token holders repayments.   Architecture  MIP21 Contracts For onboarding the HVBank Collateral we will be using the MIP21 standard contracts which disables automatic liquidation of the vault and ensures that the borrower is prevented from minting more DAI than the Debt Ceiling (line). Any liquidation of the vault would require that Maker Governance trigger a liquidation. For the proposed HVBank implementation, we will be using the following MIP21 contracts:  RwaToken RwaUrn RwaLiquidationOracle RwaJar - a new smart contract that will allow any fees earned on the participation to be remitted directly to the Surplus Buffer on a monthly basis.  With the following MIP21 proscribed spell used for the initial deployment of the collateral and to facilitate manual liquidation of the collateral in the event of a default:  RWA Onboarding Spell  The spell will lock the ERC20 token into the RWAUrn. As this token is solely acting as a placeholder for the actual Participation certificates \u2013 physically held by the Trust \u2013 and automatic liquidation has been disabled, the on-chain value that will be reported will be the debt ceiling of $100mm. The actual value of the collateral can only be determined based on the uploaded participation certificates and on-going reports from the Calculation Agent detailing the balances in the Trust\u2019s various accounts and the funding that has been provided at any point in time for the Participations held and maintained by the RWA MPTrust. Some modifications will be required to the standard MIP21 implementation. Specifically, to accommodate the preference to structure this transaction with the Stability Fee set to 0 with monthly remittances of interest and fees to be paid monthly directly to the Surplus Buffer - these modifications are facilitated through the RwaJar contract.  MIP21 Modifications Required to Facilitate the Transaction Based on the transaction outline and term sheet provided by @Real World Finance, modifications will be made to the MIP21 standard technical arrangements to accommodate the fact that on a monthly basis \u2013 and until the expiration of the Master Participation Agreement \u2013 the payments detailed below will be paid to the Surplus Buffer:  The portion of monthly remittances from HVBank paid to the PRA, representing income from the underlying loan participations (net of waterfall expenses); and Any investment income earned in the trust\u2019s investment account (AIIA) which will be sent to the Surplus Buffer bi-annually\u2026  It should be noted that until expiration of the Master Participation Agreement, on a monthly basis, the monthly remittances received in the PRA, representing debt repayments for the loans underlying the Participations will be swept to the Trusts\u2019 funding account (PFA), to fund existing and new participations. After expiration of the Master Participation Agreement, as existing Participations may not have yet expired and income and debt repayments will continue to be received until the expiry of the individual participations, any amount representing permanent debt repayments (as determined by the Calculation Agent) will be paid on a monthly basis to the urn. To accommodate this, we have created a simple generic permissionless RwaJar contract containing a function void() that allows the Trust on a monthly basis to repay income/fee remittances (DAI sent to this contract) directly to the surplus buffer. This module uses similar logic that MakerDAO Core Units are currently using to repay DAI to the Surplus Buffer. Given that this code is already widely used we do not believe that a contract audit will be necessary. This contract was reviewed by @Protocol Engineering Core Unit to ensure that no incremental technical risk is incurred by the Maker Protocol who have approved this contract and are aligned with our assessment that no audit is required. Summarized below is a summary of the MIP21 contracts which will be utilized.  RwaToken Source code An implementation of the ERC20 token standard, with the balanceOf(address) of the deployer of the contract being set to 1 WAD at deployment. There are 18 decimals of precision. There are three state changing functions, that are all available to the token holder, and are specific to the ERC20 token standard: There are three state changing functions, that are all available to the token holder, and are specific to the ERC20 token standard:   transfer(address dst, uint wad) external returns (bool);   transferFrom(address src, address dst, uint wad) public returns (bool);   approve(address usr, uint wad) external returns (bool);    RwaUrn2 Source code The RwaUrn is unique to each MIP21 collateral type. Aside from the core DSS wards, can, rely(address), deny(address), hope(address), and nope(address) functions, there are five functions:   file(bytes32, address)   lock(uint256)   free(uint256)   draw(uint256)   wipe(uint256)   exit(uint256)   The file function can only be called by governance (via the auth modifier) The rest of the functions can only be called by those who have been given the operator permission (hoped or noped) on the RWAUrn contract. And any Dai drawn by the RwaUrn2 can only be sent to the outputConduit address defined by governance when deploying the contract.  RwaLiquidationOracle Source code The RwaLiquidationOracle contract consists of six state-changing functions (besides the usual DSS rely(address), deny(address)), all protected by the auth modifier and can only be called by governance:   file(bytes32, address)   init(bytes32 ilk, bytes32 val,address doc,uint48 tau)   bump(bytes32 ilk,uint256 val)   tell(bytes32)   cure(bytes32)   cull(bytes32)   There is one externally accessible view function called good(bytes32) that anyone can use to check the liquidation status of the position. This function does not change contract state. This is not a typical Maker oracle. It will only report on the liquidation status of RwaUrn2, and can only be acted upon by governance. To state it plainly, this oracle is not vulnerable to flash loan attacks or any manipulation aside from a governance attack. file can be called by governance to change the vow address (used in cull). init is the initialization function. It takes 4 parameters:   ilk: name of the vault, in this case, RWA009.   val: estimated value of the collateral token.   doc: link to legal documents representing the underlying legal scheme.   tau: minimum delay between the soft-liquidation and the hard-liquidation/write-off. It should be noted that for this transaction tau will be set to 0 so no soft liquidation will be possible.   bump can be called by governance to increase the estimated value of the collateral. tell can be called by governance to start a soft-liquidation. cure can be called by governance after a soft-liquidation has been triggered to stop it. cull can be called by governance to start a hard-liquidation/write-off. This will mark all the remaining debt of the vault as bad debt and impact the Surplus Buffer (vow).  RwaJar Source Code The RwaJar contract is a permissionless contract which contains the following functions:   a function void() which will transfer any DAI balance contained in the contract to the current vow address, obtained directly from the DSS on-chain change-log (chainlog).   A function toss(uint256 wad) which will pull the specified amount of DAI from the sender\u2019s wallet to the current vow address, obtained directly from the chainlog. This function requires that the RWAJar contract has been previously approved by the msg.sender to transfer the specified amount of DAI.   The relevant DaiJoin and DAI addresses that this contract references are immutable after the deployment \u2013 so there is no risk that the RWAJar will send DAI to a fraudulent account address or that it will mistakenly take any other token as if it was DAI.   As indicated above, this contract has not been audited but duplicates logic contained in a commonly used smart contract by MakerDAO, used for returning unused Core Unit budgets to the Surplus Buffer. This contract has full test coverage and has been approved and reviewed by @Protocol Engineering who is in agreement that an audit of this contract is not required.  Overview of technical setup and actors The following diagrams detail the proposed high level technical setup in terms of the different flows that will occur for funding of the participations and the remittance of regular monthly debt, interest, and fee payments for the underlying loans (Maker smart contracts in Orange, and the involved actors in gray). NOTE: STEP 1 OF THE TECHNICAL IMPLEMENTATION HAS BEEN UPDATED PLEASE SEE IN THE THREAD BELOW \u2192 ADDENDUM TO INITIAL RISK ASSESSMENT - CHANGE IN DRAW DOWN IMPLEMENTATION - these modifications will not change any of the contracts used in the implementation solely the execution of the spell - such that no draw from the urn will be greater than 25MM DAI    Post Governance Approval/Post Spell    1600\u00d71132 203 KB  Immediately after approval by executive vote of the spell the RwaToken will be deployed using the RwaToken factory contract and 1 RwaToken will be minted and transferred to the MCD_PAUSE_PROXY and act as a placeholder representing the participation certificates and trust\u2019s investment account balances, which at any point in time are being held by RWA MPTrust. The spell will be cast with the following parameters:  Debt Ceiling: 100_MILLION_DAI Stability Fee: ZERO Liquidation Ratio: 100 MCD_PAUSE_PROXY (Maker Governance) will be permissioned as the operator of the RWAUrn to facilitate the draw of DAI at the time the spell is cast  The code for the spell will then transfer the RWAToken (RWA009) and will draw (mint) $100 million Dai to the RWA Foundation account at Genesis. RWA Foundation will provide instructions to Genesis to convert the DAI to USD and send to the trusts\u2019 escrowed Participation Funding Account (Steps 1 and 2 in the above schematic).  2. Ongoing Purchase of Participations From the Participation Funding Account Purchase of participations will occur completely off-chain during the term of the Master Participation Agreement as described in the @Real World Finance risk assessment. In summary, participation purchases will occur as follows:   HVBank will relay information about participation purchases being offered to RWA MPTrust to the RWA MPTrust\u2019s Calculation Agent (Ankura);   Ankura will complete due diligence on the offered participation(s) on behalf of the Trust and upon confirming that it meets the requirements of the Trust will provide certification that the participation meets the purchase requirements. The certification will be uploaded to off chain storage and will be delivered to the RWA MPTrust\u2019s trustee WSFS who will provide the necessary funding required under the participation purchase to HVBank who will deliver the executed participation certificate to WSFS to hold as security/collateral for the participation purchase.   Excess funds within the Participation Funding Account will be invested by WSFS in short term securities, as permitted under the Master Participation Agreement. Net income from these investments will be paid to the trust\u2019s Authorized Investment Income Account, for monthly distribution to MakerDAO\u2019s surplus buffer on a monthly basis (along with other income from participations as described in the next section below).   On a monthly basis, until the expiration of the Master Participation Agreement any principal repayments received by the RWA MPTrust will be sent to the Participation Funding Account (and not be used to reduce the balance in the RWAUrn) to fund future participations that may be offered by HVBank.    3. Monthly Remittances  1600\u00d71098 300 KB  The key transaction steps are detailed below:   HVBank on a regular ongoing basis, as and when received sends principal and income received on RWA MPTrust participations to the trust\u2019s Participation Receipt Account;   HVBank sends a monthly remittance report to Ankura (Calculation Agent);   Genesis the crypto broker sends the monthly exchange report to Ankura;   WSFS - the trustee sends a monthly Authorized Investment Income Account report to Ankura;   Ankura completes a detailed consolidated monthly report of RWA MPTrust\u2019s net income after all servicing activities aggregating 1) Investment and Participation Income and 2) Participation funding repayments, and uploads to MakerDAO off-chain storage for ongoing monitoring by @Real World Finance;   WSFS - sends the net amount of the monthly remittance to Genesis, for conversion from USD to DAI - detailing which amounts are paid to the RWAUrn and which to the RWAJar contracts;   Genesis sends the DAI equivalent of the monthly investment and participation income component of the remittances to the RWAJar contract;   Genesis sends the DAI equivalent of participation funding requirements to the RWAUrn contract for reducing the debt in the RWAUrn contract;   @CES\u2019s automated keeper - which will run as a job in Makers\u2019 keeper network (this job is under development and will be reviewed by @Protocol Engineering before deployment) calls void() on a monthly basis to send any DAI in the RWAJar contract directly to the Surplus Buffer;   @CES automated keeper - which will run in the same job as 9 above, calls wipe() on a monthly basis to repay any DAI in the RWAUrn contract and reduce the DAI debt outstanding.    Contract Risk Summary NB: The reader should note that his assessment is solely with respect to the smart contract transactions and interfaces required to affect the on-chain state changes required under the proposed architecture and excludes any technical functionality related to the technical infrastructure required for monitoring and uploading data to MakerDAO off-chain storage and ongoing monitoring. We understand that @Real World Finance will be developing any technical infrastructure required for integrating any off chain transaction flows needed for the proposed transaction with @Data Insights Core Unit.  Risk Analysis Conclusion: Low technical risk The RWA code implementation resides within a sandbox-like environment, and any operation not related to locking, freeing, drawing, wiping, or voiding in the RwaUrn and RWAJar contracts must be voted on by governance. The code itself is lightweight. This implementation uses simplified Oracle and Urn contracts to achieve the functionality required for this specific instance of RWA. Furthermore, MIP21 contracts have been live in production for over a year, and are thus deemed low risk to reuse for this implementation. The only addition required to the MIP21 suite of contracts is the addition of the new RWAJar contract \u2013 which as indicated is to allow the payment of monthly investment and income received from the participations directly to the surplus buffer as the stability fee will be set to 0. As indicated above this contract provides 2 simple permissionless functions void() and toss(uint256 wad) which will route the payment of DAI directly to the Surplus Buffer to the spell designated vow address. The void() function sends all DAI owned by this Smart contract whereas the toss(uint256 wad) function sends a specified amount of DAI from the msg.sender\u2019s wallet, provided the RWAJar contract has been pre-approved to send the DAI. This new contract has been reviewed and approved for use by Protocol Engineering without an audit due to its simple semantics and permissionless operation.  Supporting Materials  S\u016brya\u2019s Description Report  Files Description Table     File Name SHA-1 Hash     mip21-toolkit/src/oracles/RwaLiquidationOracle.sol 88c2b4fac899d39af0198c1fb4776171e4249c19   mip21-toolkit/src/tokens/RwaToken.sol 8d75732d93e0ad82a7bf3e0faf34550082291775   mip21-toolkit/src/urns/RwaUrn2.sol ce511f510a5d456cf686a9f64a5b46a064043c31   mip21-toolkit/src/jars/RwaJar.sol b14b29aaf896c14832511c17966104888f7bfbf5     Contracts Description Table     Contract Type Bases       \u2514 Function Name Visibility Mutability Modifiers          RwaUrn2 Implementation      \u2514 Constructor Public    NO\u2757\ufe0f   \u2514 rely External    auth   \u2514 deny External    auth   \u2514 hope External    auth   \u2514 nope External    auth   \u2514 file External    auth   \u2514 lock External    operator   \u2514 free External    operator   \u2514 draw External    operator   \u2514 wipe External    NO\u2757\ufe0f   \u2514 quit External    NO\u2757\ufe0f   \u2514 add Internal       \u2514 sub Internal       \u2514 mul Internal       \u2514 divup Internal       \u2514 rad Internal              RwaToken Implementation      \u2514 add Internal       \u2514 sub Internal       \u2514 Constructor Public    NO\u2757\ufe0f   \u2514 transfer External    NO\u2757\ufe0f   \u2514 transferFrom Public    NO\u2757\ufe0f   \u2514 approve External    NO\u2757\ufe0f          RwaLiquidationOracle Implementation      \u2514 rely External    auth   \u2514 deny External    auth   \u2514 add Internal       \u2514 mul Internal       \u2514 Constructor Public    NO\u2757\ufe0f   \u2514 file External    auth   \u2514 init External    auth   \u2514 bump External    auth   \u2514 tell External    auth   \u2514 cure External    auth   \u2514 cull External    auth   \u2514 good External    NO\u2757\ufe0f          RwaJar Implementation      \u2514  Public    NO\u2757\ufe0f   \u2514 void External    NO\u2757\ufe0f   \u2514 toss External    NO\u2757\ufe0f            Legend     symbol meaning      function can modify state    function is payable     Contract Inheritance Graph There are no inherited contracts in the MIP21 contracts (excluding tests). See below.  1600\u00d796 22.2 KB   Contract Call Graph  683\u00d71600 205 KB  ",
                    "links": [
                        "https://mips.makerdao.com/mips/details/MIP21#sentence-summary",
                        "https://forum.makerdao.com/t/huntingdon-valley-bank-hvb-rwa-collateral-onboarding-risk-assessment/15828",
                        "https://www.myhvb.com/",
                        "https://github.com/clio-finance/mip21-toolkit",
                        "https://github.com/makerdao/dss-gem-joins/blob/c2ba746fd45593136475aa5e308a57db87e7eb7f/src/join-auth.sol",
                        "https://github.com/clio-finance/mip21-toolkit/blob/master/src/tokens/RwaToken.sol",
                        "https://github.com/clio-finance/mip21-toolkit/blob/master/src/urns/RwaUrn2.sol",
                        "https://github.com/clio-finance/mip21-toolkit/blob/master/src/oracles/RwaLiquidationOracle.sol",
                        "https://github.com/clio-finance/mip21-toolkit/blob/feat/rwa-jar/src/jars/RwaJar.sol",
                        "https://forum.makerdao.com/t/huntingdon-valley-bank-hvb-additional-risk-assessment-love-cu-in-incubation/15886",
                        "https://forum.makerdao.com/t/relay-semanal-26-de-julio-01-de-agosto-del-2022/17049",
                        "https://forum.makerdao.com/t/weekly-makerdao-recap/16382/7",
                        "https://forum.makerdao.com/t/relay-semanal-5-11-de-julio-del-2022/16629",
                        "https://forum.makerdao.com/t/weekly-makerdao-recap/16382/4",
                        "https://forum.makerdao.com/t/relay-semanal-28-de-junio-05-de-julio-del-2022/16473",
                        "https://forum.makerdao.com/t/this-week-in-governance/16382/2",
                        "https://forum.makerdao.com/t/mip6-huntingdon-valley-bank-loan-syndication-collateral-onboarding-application/14219/31",
                        "https://forum.makerdao.com/t/rwf-collateral-onboarding-update-huntingdon-valley-bank/15015/12",
                        "https://forum.makerdao.com/t/incubating-legal-transactional-services-lts-weekly-update/14977/25",
                        "https://forum.makerdao.com/t/introducing-rwf-001-weekly-office-hours/13809/19"
                    ],
                    "GPT-summary": null,
                    "GPT-proposal-categories": null,
                    "GPT-discussion-categories": null,
                    "Sentiment": 5.264550673912376
                },
                {
                    "author_link": "https://forum.makerdao.com/u/Puzzler",
                    "index": "#2",
                    "likes": "2",
                    "time": "17/06/2022-11:09:23",
                    "content": "This is very thorough. Thank you  ",
                    "links": [],
                    "GPT-discussion-categories": null,
                    "Sentiment": 6.0
                },
                {
                    "author_link": "https://forum.makerdao.com/u/flipflopflapdelegate",
                    "index": "#3",
                    "likes": "1",
                    "time": "23/06/2022-12:32:37",
                    "content": "    dbkcan:  The spell will be cast with the following parameters:  Debt Ceiling: 100_MILLION_DAI Stability Fee: ZERO Liquidation Ratio: 100 MCD_PAUSE_PROXY (Maker Governance) will be permissioned as the operator of the RWAUrn to facilitate the draw of DAI at the time the spell is cast    Do you believe this will the ongoing trend, to set the Stability Fee to ZERO for all MIP21 off-chain collaterals since the PFA incurs the SF, and how does MKR token owners monitor the balance and incurring management fees of the PFA? What are the areas where MIP21 needs improvements?     dbkcan:  Ankura will complete due diligence on the offered participation(s) on behalf of the Trust and upon confirming that it meets the requirements of the Trust will provide certification that the participation meets the purchase requirements. The certification will be uploaded to off chain storage and will be delivered to the RWA MPTrust\u2019s trustee WSFS who will provide the necessary funding required under the participation purchase to HVBank who will deliver the executed participation certificate to WSFS to hold as security/collateral for the participation purchase.   Is there any way the community can get a sample of what this Certification looks like? How accurate and reliable is the reporting from calculation agents? Have discrepancies occurred? Might be best to ask LTS @christiancdpetersen     dbkcan:  On a monthly basis, until the expiration of the Master Participation Agreement any principal repayments received by the RWA MPTrust will be sent to the Participation Funding Account (and not be used to reduce the balance in the RWAUrn) to fund future participations that may be offered by HVBank.   How is this determined? What triggers the principal repayments to be used to fund future participation versus returning the principle back the RwaJar?     dbkcan:    Genesis sends the DAI equivalent of the monthly investment and participation income component of the remittances to the RWAJar contract;  Genesis sends the DAI equivalent of participation funding requirements to the RWAUrn contract for reducing the debt in the RWAUrn contract;    Do you have any insights as to what the fees will be for this service and how does Genesis mitigate currency slippage/arbitrage USD \u2014> DAI? Thanks in advance \u2014 very nicely done \u2014 much appreciated! Very helpful ",
                    "links": [],
                    "GPT-discussion-categories": null,
                    "Sentiment": 6.078846153846154
                },
                {
                    "author_link": "https://forum.makerdao.com/u/dbkcan",
                    "index": "#4",
                    "likes": "3",
                    "time": "23/06/2022-20:29:54",
                    "content": "    flipflopflapdelegate:  Do you believe this will the ongoing trend, to set the Stability Fee to ZERO for all MIP21 off-chain collaterals since the PFA incurs the SF, and how does MKR token owners monitor the balance and incurring management fees of the PFA?   I think this will be a function of the deal type - under this deal structure as we are investing in a pool of participations, it is the variability of rates and repayments for each loan underlying each participation which makes it difficult to set a constant Stability Fee that can be used. As each underlying loan will have a different rate basis  and type (SOPR, Gov Yield, fixed and floating) - with different loan repayment provisions (amortizing, revolving etc). It should be noted that the remittances from the underlying loans are paid to the Participation Receipt Account, and will be kept separate from Participation Funding Account. In terms of a short answer, I think we need to evaluate the requirements for each deal specifically the trade off of accommodating variable SF payments (ie. governance approval to adjust). A positive here is that unlike the SF payment which cumulates until final repayment of the vault debt, by structuring regular payments to the SB MD benefits by having the yield returned sooner and the ability to more quickly identify potential liquidation issues in the event amounts (or a required amount) is not paid to the SB in a particular month. Based on the report prepared by Ankura - the trusts\u2019 Trustee - will have the necessary detail to direct the three types of payments to the correct accounts, which are:  For receipts related to revolving loan repayments - back to the Participation Funding Account (to be invested and to fund future and existing (revolving) participations; For receipts relating to yield/fee income on participations to Genesis (with a direction to convert and pay the proceeds to the RWAJar - which will be voided by Maker\u2019s keeper network monthly to the Surplus Buffer (our \u201cvariable stability fee\u201d); For receipts relating to permanent debt repayments (ie. unwinding of participations) to Genesis (with a direction to convert and pay proceeds to the RWAUrn);  In this regard, the Ankura report is critical for monitoring, and as pointed out in my assessment it will be important to ensure that RWA is monitoring and checking the Ankura reports on an ongoing basis and reconciling those reports with the actual balances in the trusts\u2019 bank accounts as well as against actual Surplus Buffer receipts and reductions of debt in the RWAUrn.  I understand that in setting up the ongoing monitoring that @Real-World-Finance/@data-insights-cu  will be making the necessary regularly reporting available so that their will be transparency on a near real term basis for the MKR Token holders.     flipflopflapdelegate:  What are the areas where MIP21 needs improvements?   Many !  - my view is that MIP21 is not scalable in its current form - especially if the MD wants to grow RWA deals. In its current form the only way to prudently monitor these deals without the availability of key data on chain will be to staff up like a bank - which I believe we don\u2019t want to do! so in my view - we need to look at areas where we can technically innovate and bring more data directly on chain. For this particular deal. We are discussing within @collateral-core-unit what technology improvements we can make specifically to address the MIP21 limitations. Ultimately for transactions like this, my initial thinking is for us to create a custom token, and custom vaults for RWA, which will extend the ability of the core of the MD protocol to handle RWA. Ideally, each token would contain 1) sufficient data to encapsulate the underlying asset, so that it can automatically be liquidated - using logic in the liquidation oracle, and 2)  the token/vault data can be dynamically updated by a trustee (acting as an oracle) as payments are made. My thoughts are that ideally in a liquidation scenario, each token would encapsulate all the data that a potential secondary market purchaser would need to purchase the underlying asset. On the custom vault for RWA, my thoughts are that additional liquidation parameters could be utilized which would allow liquidation on a portfolio basis. These ideas are at an early stage of discussion/research - but we hope to share these further with the MKR token holders as we prioritize and develop potential approaches.     flipflopflapdelegate:  Is there any way the community can get a sample of what this Certification looks like? How accurate and reliable is the reporting from calculation agents? Have discrepancies occurred? Might be best to ask LTS @christiancdpetersen   @Real-World-Finance and or @christiancdpetersen would be better positioned to answer this question.     flipflopflapdelegate:  How is this determined? What triggers the principal repayments to be used to fund future participation versus returning the principle back the RwaJar?   The Ankura report would determine the amounts that would need to be submitted to the RWAJar. The amount of any permanent principal repayment would be sent to the RWAUrn - based on the structure of this transaction it is expected that the maximum funding required under each participation held by the trust (which I assume would be listed in the Ankura report but in any event available on each participation certificate held by the trust) as well as the balance in the PFA should in aggregate not exceed the debt ceiling for the transaction (Under the assumption any uncovered write-offs associated with losses from an individual participation would lead to a reduction through manual governance vote of the debt ceiling). As there is no expiry date on the transaction, and instead an ability to terminate the purchase of participations upon 90 days notice - once this notice is provided permanent principal repayments on any individual participation would be sent monthly to the RWAUrn until the expiry of that participation (instead of the PFA) and any funds sitting in the PFA not required to meet the maximum funding commitments on the held participations would be returned to the RWAUrn. It is expected that these principal repayments will lead to full repayment of the debt in the vault upon expiry of the latest participation held by the trust. I will let @Real-World-Finance confirm this but I surmise that there would be enough granular detail in the Ankura reports and reporting made by @Real-World-Finance to determine that the correct amounts have been applied to the RWAUrn and RWAJar     flipflopflapdelegate:  Do you have any insights as to what the fees will be for this service and how does Genesis mitigate currency slippage/arbitrage USD \u2014> DAI?   I will let @Real-World-Finance step in here as they are coordinating with RWA Foundation/Genesis on the handling of the currency exchange. Many thanks for the feedback on this work - happy to respond to any other clarifications or questions you might have. ",
                    "links": [],
                    "GPT-discussion-categories": null,
                    "Sentiment": 5.734149184149184
                },
                {
                    "author_link": "https://forum.makerdao.com/u/christiancdpetersen",
                    "index": "#5",
                    "likes": "2",
                    "time": "23/06/2022-21:45:28",
                    "content": "    flipflopflapdelegate:  Is there any way the community can get a sample of what this Certification looks like? How accurate and reliable is the reporting from calculation agents? Have discrepancies occurred?   I think the form of certification is less important than the substance of the role to be played by Ankura. Basically, the Trust is engaging Ankura (an independent, third party) to ensure that the proposed loan participations meet the stated eligibility requirements in the Master Participation Purchase Agreement. Once we have a working draft of the \u201ccertification\u201d itself, I am happy to make available. The Trust is engaging Ankura (as calculation agent) to be professional, accurate complete and thorough. As a party wholly independent from HVB, we expect that Ankura will only confirm those proposed participations that meet the eligibility criteria. I do not have data as to \u201cdiscrepancies\u201d.     flipflopflapdelegate:  What triggers the principal repayments to be used to fund future participation versus returning the principle back the RwaJar?   Every month, HVB will send amounts it collected under the participated loans to the Participation Receipts Account. For each participated loan, it is anticipated that HVB will be able to separate which  represent \"return of principal\" and which  represent \u201cinterest and fees\u201d. Subject to the payment priority in the cash waterfall,   the $ that represent \u201creturn of principal\u201d will be recycled by the Trustee (WSFS) to the Participation Funding Account for future purchases of loan participations [Step 6]   the $ that represent \u201cinterest and fees\u201d will be paid to RWAJar [Step 7]   A visualization of the cash waterfall is below:  Screen Shot 2022-06-23 at 5.21.37 PM1496\u00d7826 136 KB      dbkcan:  I will let @Real-World-Finance confirm this but I surmise that there would be enough granular detail in the Ankura reports and reporting made by @Real-World-Finance to determine that the correct amounts have been applied to the RWAUrn and RWAJar   Our objective is for Ankura to have enough information to track whether $/DAI represent (to Maker) a \u201creturn of capital\u201d or \u201cinterest income\u201d. This objective is standard in public securitizations.     flipflopflapdelegate:  Do you have any insights as to what the fees will be for this service and how does Genesis mitigate currency slippage/arbitrage USD \u2014> DAI?   A great question. This issue presents itself in every transaction where you have DAI/Fiat conversion. In response to the specific question: (1) We do not yet have the anticipated cost of the DAI/Fiat conversion. However, the cost will be part of the overall remittance report prepared by Ankura. (2) As structured, Maker will assume the cost of the DAI/Fiat conversion. For the initial $100M, there will be some cost for the DAI/Fiat conversion. Hypothetically, say $100,000. That means the Participation Funding Account will, on day 1, have $99,900,000 on deposit. Our thinking is to (a) first use any investment income from Authorized Investments to back-fill to $100M, and (b) if needed, use any initial interest income from participated loans to back-fill to $100M. As an alternative, the initial amount disbursed from the vault could be for $100,100,000. Going forward, for interest income eventually received in RWAJar, the amount received will be net of the Fiat/DAI conversion cost. The same applies to the \u201creturn of capital\u201d paid into RWAUrn - the final amount will be \u201cnet\u201d of the final Fiat/DAI conversion. Let me know if you have any further questions. And thank you @dbkcan for excellent support! ",
                    "links": [],
                    "GPT-discussion-categories": null,
                    "Sentiment": 5.6083333333333325
                },
                {
                    "author_link": "https://forum.makerdao.com/u/flipflopflapdelegate",
                    "index": "#6",
                    "likes": "1",
                    "time": "23/06/2022-22:12:02",
                    "content": "    christiancdpetersen:  I do not have data as to \u201cdiscrepancies\u201d.   Sorry I was referring to what is know as \u201cpre-default duties\u201d of an indenture trustee like Ankura. In case of default, what role can Ankura play in making sure MakerDAO is not a victim of a discrepancy during liquidation. Hopefully that makes sense.     christiancdpetersen:  Hypothetically, say $100,000. That means the Participation Funding Account will, on day 1, have $99,900,000 on deposit. Our thinking is to (a) first use any investment income from Authorized Investments to back-fill to $100M, and (b) if needed, use any initial interest income from participated loans to back-fill to $100M. As an alternative, the initial amount disbursed from the vault could be for $100,100,000. Going forward, for interest income eventually received in RWAJar, the amount received will be net of the Fiat/DAI conversion cost. The same applies to the \u201creturn of capital\u201d paid into RWAUrn - the final amount will be \u201cnet\u201d of the final Fiat/DAI conversion.   If I understood correctly, it\u2019s going to take Maker more than 12 months to see the RwaJar filled with \u201creturned principal\u201d? I make this assumption because assuming its  \u201ccost\u201d of $50,000 or $100,000,  you add the amount owe to WSFS, Trust taxes, money owed to Ankura, etc. indeed it will take some time for the RwaJar to fill. Does that simple analogy make sense, or am I completely wrong? Thank you as always Christian! ",
                    "links": [],
                    "GPT-discussion-categories": null,
                    "Sentiment": 5.21484375
                },
                {
                    "author_link": "https://forum.makerdao.com/u/christiancdpetersen",
                    "index": "#7",
                    "likes": "3",
                    "time": "24/06/2022-12:18:25",
                    "content": "    flipflopflapdelegate:  what role can Ankura play in making sure MakerDAO is not a victim of a discrepancy during liquidation.   Thank you. When you mention \u201cliquidation\u201d, I assume this means either (1) the liquidation by HVB of a specific participated loan (for instance, if the underlying borrower defaults) or (2) the closing of the RWA Master Participation Trust. In case (1), HVB will be the servicer during the liquidation of a specific participated loan. As with any performing loan, the RWA Master Participation Trust will receive its respective % of the proceeds from such liquidation. HVB will report that in its monthly report. We have not structured the transaction for Ankura to audit HVB. In case (2), Ankura will continue to perform its reporting role during the wind-down of the RWA Master Participation Trust. Obviously, as RWA Master Participation Trust will not be buying new participated loans, it will not have any on-going role re: review of eligibility criteria.     flipflopflapdelegate:  it\u2019s going to take Maker more than 12 months to see the RwaJar filled with \u201creturned principal\u201d? I make this assumption because assuming its \u201ccost\u201d of $50,000 or $100,000, you add the amount owe to WSFS, Trust taxes, money owed to Ankura, etc. indeed it will take some time for the RwaJar to fill.   It will inevitably take some time for RWAJar to fill as income will be derived from (1) Authorized Investments (swept semi-annually), or (2) interest income from Loan Participations (depends on the repayment profile of the underlying loan). You are correct in noting that \u201coperating costs\u201d will need to be deducted before DAI accumulates in RWAJar. I do not have an estimate as to that period. ",
                    "links": [],
                    "GPT-discussion-categories": null,
                    "Sentiment": 5.715392561983471
                },
                {
                    "author_link": "https://forum.makerdao.com/u/dbkcan",
                    "index": "#8",
                    "likes": "6",
                    "time": "30/06/2022-21:35:41",
                    "content": " ADDENDUM TO INITIAL RISK ASSESSMENT - CHANGE IN DRAW DOWN IMPLEMENTATION This addendum addresses changes to the proposed transaction structure developed with RWF and LTS to ensure counterparty risks are minimized on the initial drawdown of DAI. The initial transaction structure assumed drawdown in the spell of 100MM DAI which would be converted by the crypto broker to USD through instructions issued to the crypto broker by RWA Foundation, the sponsor of MBPTrust - MakerDAO\u2019s real world presence. After investigation by the Real World Finance team, it was discovered that due to the lack of liquidity in DAI/USD markets that the maximum amount of DAI that could be converted for same day \u201con risk\u201d settlement is 25MM DAI. As a result, we have updated our proposed technical implementation to ensure counterparty risks are minimized on drawdown of the $100MM USD in funding. Specifically, to ensure that amounts drawn from the urn for conversion to USD at any point in time are limited in amount such that counterparty risk is minimized. The following changes have been made with respect to the technical implementation:   Spells will only be executed once LTS confirms that all legal documentation for the transaction has been executed;   Prior to execution of the spell @CES/RWF will conduct a test of the CryptoBrokers\u2019 wallet address to ensure that they have full control of that address;   The initial spell on a successful governance vote will set the Debt Ceiling to $100MM DAI and establish the MCD_PAUSE_PROXY as the operator of the urn and the OutputConduit will be set to the CryptoBrokers\u2019 wallet address (no change from our initial implementation);   Rather than drawing down 100MM DAI from the urn and routing this to the CryptoBroker, the initial spell will draw down 25MM DAI and route this to the CryptoBroker;   The remaining 75MM DAI will be drawn by executing spells consecutively (1 per week) each for 25MM DAI until the urn is fully drawn.   It should be noted that, other ways to execute this transaction and minimize the draws were investigated with Protocol Engineering - such as using a modified DSSVest contract or using a multisig as the operator of the urn and even swapping DAI for USD from the PSM. Due to time constraints and the complexity of developing these contracts and the likely requirement for an audit this approach was not chosen for now, however, CES will be investigating further modifying our MIP21 toolkit to provide the ability to limit draws from an urn by type and amount. Attached below is a schematic detailing the new approach for drawdown via the spells.  1600\u00d71173 263 KB  Summary By switching from drawing the 100MM DAI in its entirety to four separate spells, each of which remit 25MM to the crypto broker, counter-party and single-point-of-failure risk have been minimized. This is because 25MM represents the highest DAI sum that can be settled the same day, thus minimizing the amount of time DAI sits in any one place. Aside from the changes indicated here there are no other changes in the technical implementation as proposed in our initial token assessment. ",
                    "links": [
                        "https://forum.makerdao.com/t/weekly-makerdao-recap/16382/15",
                        "https://forum.makerdao.com/t/relay-semanal-23-29-de-agosto-del-2022/17600",
                        "https://forum.makerdao.com/t/weekly-makerdao-recap/16382/12",
                        "https://forum.makerdao.com/t/weekly-makerdao-recap/16382/9"
                    ],
                    "GPT-discussion-categories": null,
                    "Sentiment": 5.159671823274764
                },
                {
                    "author_link": "https://forum.makerdao.com/u/williamr",
                    "index": "#9",
                    "likes": "5",
                    "time": "01/07/2022-00:19:55",
                    "content": "@dbkcan Thank you for revising and describing the technical implementation in the drawing of funds from the RWAUrn to the crypto broker in a number of subsequent spells executed only once, and if, the onchain Gov Poll is approved by Governance. Given the ambitious schedule this transaction had from the get-go, the outlined technical implementation which might be followed by a future enhancement in the deployment toolkit of CES with the inclusion of DssVest seems like a pragmatic and iterative approach. All of that while still keeping in this initial phase a significant level of transparency to the community in the execution of each spell draw. It has been a pleasure working and collaborating with the CES CU and its contributors throughout this process. Will. ",
                    "links": [],
                    "GPT-discussion-categories": null,
                    "Sentiment": 5.390625
                },
                {
                    "author_link": "https://forum.makerdao.com/u/dbkcan",
                    "index": "#10",
                    "likes": "7",
                    "time": "27/07/2022-17:19:12",
                    "content": " Testing/Confirmation of Ownership of The Output Conduit Address - 0x508D982e13263Fc8e1b5A4E6bf59b335202e36b4 @collateral-core-unit  completed a test of to confirm the ownership of the above address by Genesis Trading on July 6, 2022. As Genesis Trading personnel are precluded from accessing the private keys for the above address by their Custodian, it was decided that in order to verify the ownership of this address by Genesis - that a CES group member would send DAI to the above address and that Genesis trading upon receipt would send back DAI to a CES designated address. The order of operations for conducting the test was as follows:   @collateral-core-unit @Real-World-Finance members and @christiancdpetersen joined the Real World Foundation/Genesis trading channel on Telegram to discuss with the Genesis Trading traders the testing procedure.   CES contributor @M_C sent 10 DAI to the address 0x508D982e13263Fc8e1b5A4E6bf59b335202e36b4 as evidenced by this etherscan transaction https://etherscan.io/tx/0x4fd33ff92d222e6a843e18ce6c2180414dca30dab791f5b00830ee54f069ce81.   Genesis Trading confirmed receipt of the 10 DAI in their telegram channel.   Genesis Trading was then asked to send 10 DAI from 0x508D982e13263Fc8e1b5A4E6bf59b335202e36b4 to a @collateral-core-unit controlled wallet this transaction was confirmed received by @M_C . This transaction is detailed here https://etherscan.io/tx/0xfecb71d9fa27e4b7b78fe31d0b7778a005ef96412d7d702371d334cab0092f1d   @M_C  asked other CES team members (@dbkcan & @amusingaxl) to confirm the tests by reviewing the discussion in the telegram channel and the above included etherscan transactions   Based on the above test, @collateral-core-unit confirms that the subject address hardcoded within the output conduit and specified in the legal agreements for the HVBank/MIP21 transaction is controlled by Genesis Trading. ",
                    "links": [
                        "https://etherscan.io/tx/0xfecb71d9fa27e4b7b78fe31d0b7778a005ef96412d7d702371d334cab0092f1d"
                    ],
                    "GPT-discussion-categories": null,
                    "Sentiment": 5.467261904761904
                },
                {
                    "author_link": "https://forum.makerdao.com/u/system",
                    "index": "#11",
                    "likes": "0",
                    "time": "25/10/2022-17:19:16",
                    "content": "This topic was automatically closed 90 days after the last reply. New replies are no longer allowed. ",
                    "links": [],
                    "GPT-discussion-categories": null,
                    "Sentiment": 5.0606060606060606
                }
            ]
        }
    ],
    "group_index": "1109"
}