{
    "poll_list": [],
    "discourse_list": [
        {
            "thread_link": "https://forum.makerdao.com/t/circuit-breaker-trade-offs-and-questions-for-the-community/18240",
            "title": "Circuit breaker trade-offs and questions for the community ",
            "index": 18240,
            "category": [
                "Governance",
                "Proposal Ideas"
            ],
            "tags": [
                "risk",
                "protocol-engineering",
                "sne-001"
            ],
            "content": [
                {
                    "author_link": "https://forum.makerdao.com/u/pyramidmaker",
                    "index": "#1",
                    "likes": "5",
                    "time": "05/10/2022-12:58:44",
                    "content": "We reviewed the root causes of past bridge hacks in a previous post (Bridge Hack review and learnings for Maker teleport) and derived some learnings to mitigate risks. One of the learnings (that two protocols embraced after the fact) is that a daily limit combined with a circuit breaker would limit the damages and give some time for the team to react in 100% of the hacks we reviewed. The objective of this post is to provide clarity to the community and MKR holders about what a circuit breaker is, and provide some insights in the different designs and timelines. At the end of the post, we ask clear and direct questions to the community regarding the implementation of circuit breakers.  About circuit breakers Circuit breaker principle: All hacks are either escrow drains or thin air mints. Hence, a circuit breaker should be implemented both on the escrow (to limit potentially unwanted withdrawals) and on the mint function (to limit thin air mint). Daily limit: The daily limits (one for withdraw, and one for mint on L2) are just risk parameters to allow enough time for governance to trigger the circuit breakers. If the team was only able to trigger the circuit breaker within 48h, the maximum losses due to a hack would be 2x the daily limit. Trigger: The key aspect to consider in the circuit breaker is how it can be triggered. By whom? In how much time? Bridge invariant: We are monitoring what we call the bridge invariant, which is an equation that needs to hold to prove that the bridge is properly balanced. If the invariant is broken and the monitoring infrastructure is sound, the bridge has suffered either an escrow drain or a thin air mint attack. The challenge in maintaining an accurate monitoring of the bridge is that both data from L1 and L2 need to be compared, and also accounting for the DAI in flight between L1 and L2s. By whom can the circuit breaker be triggered? How fast? There are three main types of options to design a circuit breaker. They all have different speed and a different impact on censorship resistance.   By a multisig wallet. The circuit breaker can be triggered within few hours, but is not censorship resistant  Many protocols will decide to have a relatively centralized circuit breaker that can be triggered off of a multi-sig wallet. However, this design would compromise censorship resistance for MakerDAO, compromise security, and might be slow in some cases (e.g., if most signers are on vacation or unavailable).   By governance. The circuit breaker can be triggered within 6 to 36 hours and is censorship resistant  That is currently our only option available. The amount of funds at risk in case of a hack would be 1 to 2x the daily limit (i.e., 6 to 48 hours divided by 24h, times the daily limit). This design is for sure not fast enough to make the circuit breaker very efficient, but still limits damages and is censorship-resistant.   By anyone. The circuit breaker can be triggered in minutes, and is censorship-resistant  This is the ideal design since it would keep the amount at risk in case of a hack equal or below 1x the limit. Obviously, if the design is permissionless, a proof that the invariant is broken needs to be submitted when the circuit breaker is being triggered. We currently do not have the infrastructure to operate such a circuit breaker, and we are yet to come up with a robust design.  Designs of circuit breakers that can be triggered on a permissionless way The clear advantage of such a design is that the circuit breaker would be triggered very fast. However, if the design is permissionless, the person triggering the circuit breaker should submit a proof that the bridge invariant has been violated. Another important dimension is that the calculation of the invariant needs to be exact and very robust, otherwise malicious actors might have the opportunity to trigger the circuit even if the bridge is healthy and the bridge is not compromised. We have thought of two ways of doing this:   Using storage proofs: The user triggering the circuit breaker needs to submit a storage proof, which is mathematical proof that the invariant is broken. As mentioned earlier, the proof needs to be comparing data from L1 and L2 and also account for the amounts in flight between L1 and L2s. The timing to develop a robust solution either ourselves or with a partner would be ~ 6-12 months.   Using a quorum of oracles or a computational oracle: the circuit breaker can be triggered by anyone through a smart contract that will check that the invariant is broken by calling a set of oracles monitoring the invariant. There are multiple ways to design this oracle (either fully off-chain, or a computational oracle). The timing to develop a robust solution would be ~ 6-12 months.   Both of those solutions would take a significant amount of time and effort to develop. Hence we are looking for guidance from the community. The current risk parameters agreed upon did not factor in the existence of circuit breakers. However, the implementation of circuit breakers might allow us to scale those risk parameters faster.  Questions for the community   Short-term plan: Implement imperfect circuit breakers or not?  Implement two circuit breakers that will be controlled by governance. It is censorship-resistant and the potential loss in the event of a hack is 2x the daily limit    Long-term plan: Implement a more robust circuit breaker or not? How to experiment?  Option 1: If we build a circuit breaker, are we ok keeping a slow circuit breaker operated by governance? Knowing that the potential losses in the event of a hack are 2x the daily limit Option 2: Should we plan for building a censorship-resistant circuit breaker within the next 6-12 months? That circuit breaker could be activated much faster, making the potential losses to be maximum the daily limit. That circuit breaker design would require a significant effort to develop from PECU and SECU Given the experimental and innovative nature of this design, if we plan on building a more robust circuit breaker, should we test the design on one rollup before considering implementing it across the wormhole bridges?    ",
                    "links": [
                        "https://forum.makerdao.com/t/starknet-engineering-core-unit-september-2022-update/18426",
                        "https://forum.makerdao.com/t/weekly-forum-recap/16247/23"
                    ],
                    "GPT-summary": "The post explains the concept of circuit breakers and their implementation in the context of MakerDAO. The author provides insights into different designs and timelines of circuit breakers and asks the community for feedback on their implementation. The post also raises questions about the short-term and long-term plans for implementing circuit breakers and seeks guidance from the community.",
                    "GPT-proposal-categories": null,
                    "GPT-discussion-categories": [
                        "Author of proposal is explaining proposal",
                        "None"
                    ],
                    "Sentiment": 5.3717490842490845
                }
            ]
        }
    ]
}